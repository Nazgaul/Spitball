<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" schema="Zbox"
                   assembly="Zbang.Zbox.ViewModel"
                   namespace="Zbang.Zbox.ViewModel.DTOs">

 
  <resultset name="LibraryDashboardDetails">
    <return-scalar column="Name" type="string"/>
    <return-scalar column="Img" type="string"/>
    <return-scalar column="AdvertismentUrl" type="string"/>
  </resultset>

  <resultset name="NodeDto">
    <return-scalar column="Id" type="long"/>
    <return-scalar column="Name" type="string"/>
    <!--<return-scalar column="Color" type="string"/>-->
  </resultset>

  <resultset name="ParentNodeDetails">
    <return-scalar column="Id" type="long"/>
    <return-scalar column="Name" type="string"/>
    <return-scalar column="Url" type="string"/>
    <return-scalar column="NoBoxes" type="int"/>
  </resultset>

 


  <!--Dash page-->
  <sql-query name="GetUniversityDataForDashBoardByUniversityId" read-only="true" resultset-ref="LibraryDashboardDetails">
    <![CDATA[
      select uWrap.userName as Name, uWrap.UserImageLarge as Img  , uWrap.AdvertismentUrl as AdvertismentUrl
      from zbox.users uWrap  
      where uWrap.UserId = :univerSityDbQuery
    ]]>
  </sql-query>

  <!--Lib page-->
  
  <sql-query name="GetLibraryNode" read-only="1" resultset-ref="ParentNodeDetails">
    <![CDATA[
     select l.libraryid as Id, l.Name as Name, 
     l.Url as Url, l.NoOfBoxes as NoBoxes 
     from zbox.Library l
    where l.Id = :UniversityId
    order by name
    ]]>
  </sql-query>
  
    <sql-query name="GetLibraryNodeWithParent" read-only="1" resultset-ref="ParentNodeDetails">
    <![CDATA[
     select l.libraryid as Id, l.Name as Name, 
     l.Url as Url, l.NoOfBoxes as NoBoxes 
     from zbox.Library l
    where l.Id = :UniversityId
    and l.parentid = :ParentId
    order by name
    ]]>
  </sql-query>



</hibernate-mapping>
