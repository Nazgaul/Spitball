/**
 * @license Angulartics v0.17.2
 * (c) 2013 Luis Farzati http://luisfarzati.github.io/angulartics
 * License: MIT
 */
(function(n){"use strict";var t=window.angulartics||(window.angulartics={});t.waitForVendorCount=0;t.waitForVendorApi=function(n,i,r,u,f){f||t.waitForVendorCount++;u||(u=r,r=undefined);Object.prototype.hasOwnProperty.call(window,n)&&(r===undefined||window[n][r]!==undefined)?(t.waitForVendorCount--,u(window[n])):setTimeout(function(){t.waitForVendorApi(n,i,r,u,!0)},i)};n.module("angulartics",[]).provider("$analytics",function(){var i={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3,developerMode:!1},r={},u={},s=function(n){return function(){t.waitForVendorCount&&(r[n]||(r[n]=[]),r[n].push(arguments))}},e=function(t,i){return u[t]||(u[t]=[]),u[t].push(i),function(){var i=arguments;n.forEach(u[t],function(n){n.apply(this,i)},this)}},f={settings:i},h=function(n,t){t?setTimeout(n,t):n()},o={$get:function(){return f},api:f,settings:i,virtualPageviews:function(n){this.settings.pageTracking.autoTrackVirtualPages=n},firstPageview:function(n){this.settings.pageTracking.autoTrackFirstPage=n},withBase:function(t){this.settings.pageTracking.basePath=t?n.element("base").attr("href").slice(0,-1):""},withAutoBase:function(n){this.settings.pageTracking.autoBasePath=n},developerMode:function(n){this.settings.developerMode=n}},c=function(t,u){f[t]=e(t,u);var o=i[t],s=o?o.bufferFlushDelay:null,c=s!==null?s:i.bufferFlushDelay;n.forEach(r[t],function(n,t){h(function(){u.apply(this,n)},t*c)})},l=function(n){return n.replace(/^./,function(n){return n.toUpperCase()})},a=function(n){var t="register"+l(n);o[t]=function(t){c(n,t)};f[n]=e(n,s(n))};return n.forEach(["pageTrack","eventTrack","setAlias","setUsername","searchTrack","setVariable","socialTrack","timingTrack","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],a),o}).run(["$rootScope","$window","$analytics","$injector",function(t,i,r,u){r.settings.pageTracking.autoTrackFirstPage&&u.invoke(["$location",function(n){var t=!0,f,s,e,h,o;if(u.has("$route")){f=u.get("$route");for(s in f.routes){t=!1;break}}else if(u.has("$state")){e=u.get("$state");for(h in e.get()){t=!1;break}}t&&(r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname),r.settings.trackRelativePath?(o=r.settings.pageTracking.basePath+n.url(),r.pageTrack(o,n)):r.pageTrack(n.absUrl(),n))}]);r.settings.pageTracking.autoTrackVirtualPages&&u.invoke(["$location",function(n){r.settings.pageTracking.autoBasePath&&(r.settings.pageTracking.basePath=i.location.pathname+"#");u.has("$route")&&t.$on("$routeChangeSuccess",function(t,i){if(!i||!(i.$$route||i).redirectTo){var u=r.settings.pageTracking.basePath+n.url();r.pageTrack(u,n)}});u.has("$state")&&t.$on("$stateChangeSuccess",function(){var t=r.settings.pageTracking.basePath+n.url();r.pageTrack(t,n)})}]);r.settings.developerMode&&n.forEach(r,function(n,t){typeof n=="function"&&(r[t]=function(){})})}]).directive("analyticsOn",["$analytics",function(t){function i(n){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(n.tagName.toLowerCase()+":"+(n.type||""))>=0}function u(n){return i(n),"click"}function f(n){return i(n)?n.innerText||n.value:n.id||n.name||n.tagName}function e(n){return n.substr(0,9)==="analytics"&&["On","Event","If","Properties","EventType"].indexOf(n.substr(9))===-1}function r(n){var t=n.slice(9);return typeof t!="undefined"&&t!==null&&t.length>0?t.substring(0,1).toLowerCase()+t.substring(1):t}return{restrict:"A",link:function(i,o,s){var c=s.analyticsOn||u(o[0]),h={};n.forEach(s.$attr,function(n,t){e(t)&&(h[r(t)]=s[t],s.$observe(t,function(n){h[r(t)]=n}))});n.element(o[0]).bind(c,function(r){var u=s.analyticsEvent||f(o[0]);(h.eventType=r.type,!s.analyticsIf||i.$eval(s.analyticsIf))&&(s.analyticsProperties&&n.extend(h,i.$eval(s.analyticsProperties)),t.eventTrack(u,h))})}}}]).directive("analyticsSocial",["$analytics","$timeout",function(t){function i(n){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(n.tagName.toLowerCase()+":"+(n.type||""))>=0}function r(n){return i(n),"click"}function u(n){return i(n)?n.innerText||n.value:n.id||n.name||n.tagName}function f(n){return n.substr(0,9)==="analytics"&&["On","Event","If","Properties","EventType"].indexOf(n.substr(9))===-1}function e(n){var t=n.slice(9);return typeof t!="undefined"&&t!==null&&t.length>0?t.substring(0,1).toLowerCase()+t.substring(1):t}return{restrict:"A",scope:!0,link:function(i,o,s){var h=s.analyticsOn||r(o[0]);i.$analytics={};n.forEach(s.$attr,function(n,t){f(t)&&s.$observe(t,function(n){i.$analytics[e(t)]=n})});n.element(o[0]).bind(h,function(r){var f=s.analyticsEvent||u(o[0]);(i.$analytics.eventType=r.type,!s.analyticsIf||i.$eval(s.analyticsIf))&&(s.analyticsProperties&&n.extend(i.$analytics,i.$eval(s.analyticsProperties)),t.socialTrack(f,i.$analytics))})}}}])})(angular);
// * @license Angulartics v0.16.3
