!function (n, e) { "function" == typeof define && define.amd ? define("deeplink", e(n)) : "object" == typeof exports ? module.exports = e(n) : n.deeplink = e(n) }(window || this, function (n) { "use strict"; function e() { var n, e = location.pathname.substring(1).split("/"); switch (e[0].toLowerCase()) { case "box": case "course": n = ".BOX"; break; case "item": n = ".ITEM"; break; default: n = ".DASHBOARD" } return n } if (n.document && n.navigator) { var t, a = {}, r = { iOS: {}, android: {}, androidDisabled: !1, fallback: !0, delay: 1e3, delta: 500 }, i = function (n, e) { var t = {}; for (var a in n) t[a] = n[a]; for (var a in e) t[a] = e[a]; return t }, o = function () { var n = "itms-apps://itunes.apple.com/app/", e = a.iOS.appName, t = a.iOS.appId; return t && e ? n + e + "/id" + t + "?mt=8" : null }, d = function () { var n = "market://details?id=", e = a.android.appId; return e ? n + e : null }, u = function () { var n = { ios: a.iOS.storeUrl || o(), android: a.android.storeUrl || d() }; return n[a.platform] }, c = function () { return navigator.userAgent.match("Android") }, l = function () { return navigator.userAgent.match("iPad") || navigator.userAgent.match("iPhone") || navigator.userAgent.match("iPod") }, f = function () { return c() || l() }, s = function (n) { return function () { var e = u(), t = a.delay + a.delta; "string" == typeof e && Date.now() - n < t && (window.location.href = e) } }, p = function (n) { a = i(r, n), c() && (a.platform = "android"), l() && (a.platform = "ios") }, m = function (n) { if (!f()) return !1; if (!c() || !a.androidDisabled) { if (c() && !navigator.userAgent.match(/Firefox/)) { var r = n.match(/([^:]+):\/\/(.+)$/i); n = "intent://" + r[2] + "#Intent;scheme=" + r[1], n += ";package=" + a.android.appId, n += ";action=" + a.android.appId + e(), a.urlFallback && (n += ";S.browser_fallback_url=" + a.urlFallback), n += ";end" } a.fallback && (t = setTimeout(s(Date.now()), a.delay)); var i = document.createElement("iframe"); return i.onload = function () { clearTimeout(t), i.parentNode.removeChild(i), window.location.href = n }, i.src = n, i.setAttribute("style", "display:none;"), document.body.appendChild(i), !0 } }; return { setup: p, open: m } } });