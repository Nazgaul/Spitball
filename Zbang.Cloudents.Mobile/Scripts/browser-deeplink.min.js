(function(n,t){typeof define=="function"&&define.amd?define("deeplink",t(n)):typeof exports=="object"?module.exports=t(n):n.deeplink=t(n)})(window||this,function(n){"use strict";function y(n){var i=n.split("/"),t;switch(i[0].toLowerCase()){case"box":case"course":t=".BOX";break;case"item":t=".ITEM";break;default:t=".DASHBOARD"}return t}if(n.document&&n.navigator){var r,t={},f={iOS:{},android:{},androidDisabled:!1,fallback:!0,delay:1e3,delta:500},e=function(n,t){var r={};for(var i in n)r[i]=n[i];for(i in t)r[i]=t[i];return r},o=function(){var n=t.iOS.appName,i=t.iOS.appId;return i&&n?"itms-apps://itunes.apple.com/app/"+n+"/id"+i+"?mt=8":null},s=function(){var n=t.android.appId;return n?"market://details?id="+n:null},h=function(){var n={ios:t.iOS.storeUrl||o(),android:t.android.storeUrl||s()};return n[t.platform]},i=function(){return navigator.userAgent.match("Android")},u=function(){return navigator.userAgent.match("iPad")||navigator.userAgent.match("iPhone")||navigator.userAgent.match("iPod")},c=function(){return i()||u()},l=function(n){return function(){var i=h(),r=t.delay+t.delta;typeof i=="string"&&Date.now()-n<r&&(window.location.href=i)}},a=function(n){t=e(f,n);i()&&(t.platform="android");u()&&(t.platform="ios")},v=function(n){var f,u;return c()?i()&&t.androidDisabled?void 0:(i()&&!navigator.userAgent.match(/Firefox/)&&(f=n.match(/([^:]+):\/\/(.+)$/i),n="intent://"+f[2]+"#Intent;scheme="+f[1],n+=";package="+t.android.appId,n+=";action="+t.android.appId+y(f[2]),t.urlFallback&&(n+=";S.browser_fallback_url="+t.urlFallback),n+=";end"),t.fallback&&(r=setTimeout(l(Date.now()),t.delay)),u=document.createElement("iframe"),u.onload=function(){clearTimeout(r);u.parentNode.removeChild(u);window.location.href=n},u.src=n,u.setAttribute("style","display:none;"),document.body.appendChild(u),!0):!1};return{setup:a,open:v}}});