@using Zbang.Cloudents.Mobile.Extensions
@using Zbang.Cloudents.Mobile.Views.Dashboard.Resources
@using Zbang.Cloudents.Mobile.Views.Shared.Resources

<section class="dashboard" id="dashboard" inner-scroll="{{dashboard.loading}}">
    <header>
        <button type="button" class="menuBtn rFloat" id="menuBtn">
            @Html.Svg("~/Images/Defs.svg", "menu", new { @class = "svg-menu" })
            @*<div class="msgCounter">5</div>*@
        </button>
        <a ui-sref="root.dashboard"><h1>@Html.Svg("~/Images/Defs.svg", "logo", new { @class = "svg-logo" })</h1></a>
    </header>
    <section class="welcome" ng-class="{closed : dashboard.welcomeClosed }">
        <h1>@SharedResources.WelcomeCloudents</h1>
        <h3>@DashboardResources.FreeOnline</h3>

        <a class="searchLink" ui-sref="root.search">
            <span class="searchLinkTxt">@SharedResources.FindClasses</span>
            @Html.Svg("~/Images/Defs.svg", "search", new { @class = "svg-search ltr" })
        </a>
        <div class="featureTxt">
            @Html.Svg("~/Images/Defs.svg", "document", new { @class = "svg-doc" })
            <span>@DashboardResources.ShareFiles</span>
        </div>
        <div class="featureTxt">
            @Html.Svg("~/Images/Defs.svg", "quizInner", new { @class = "svg-quizInner" })
            <span>@DashboardResources.CreateQuizzes</span>
        </div>
        <button type="button" class="closeBtn" ng-click="dashboard.closeWelcome()">
            @Html.Svg("~/Images/Defs.svg", "close", new { @class = "svg-close" })
        </button>
    </section>

    <ul class="followedClasses" scroll-paging on-scroll="dashboard.getBoxList(true)">
        <li ng-repeat="box in dashboard.boxes">
            <a href="{{::box.url}}" class="ghost" analytics-on analytics-event="Click on box" analytics-category="Dashboard page" analytics-label="User clicked on a box">                
                <div class="details vCentered" data-box-letter>
                    <div class="courseName elps">{{::box.name}}</div>
                    <span>{{::box.itemCount}}&nbsp;@SharedResources.Items</span>
                    <span>{{::box.commentCount}}&nbsp;@SharedResources.Comments</span>
                </div>
                @*<img width="40" height="40" ng-src="{{::box.boxPicture}}" />
                    @Html.Svg("~/Images/Defs.svg", "right", new { @class = "svg-right ltr" })*@
            </a>
        </li>
    </ul>
    <section class="recommendedClasses" ng-if="dashboard.showRecommended">
        <h2>@DashboardResources.RecommendedCourses</h2>
        <ul class="recommendedList">
            <li class="recommendedItem" ng-repeat="recommendedBox in dashboard.recommendedBoxes">
                <a drag-view href="{{::recommendedBox.url}}" class="courseLink" analytics-event="Click on Box" analytics-category="Dashboard" analytics-label="User clicked on a recommneded box">
                    <div class="rcDetails ghost" ng-class="::{ rcFull : recommendedBox.professor && recommendedBox.courseCode }">
                        <div class="vCentered elps" data-box-letter>
                            <div class="courseName">{{::recommendedBox.name}}</div>
                            <span class="prof elps">{{::recommendedBox.professor}}</span>
                            <span class="courseId elps">{{::recommendedBox.courseCode}}</span>
                        </div>
                        @*<img alt="" width="48" height="48" ng-src="{{::recommendedBox.picture}}" />*@
                    </div>
                </a>
                <div class="rcStats">
                    <div class="friends" data-friends-count="{{::recommendedBox.membersCount}}">
                        @Html.Svg("~/Images/Defs.svg", "user", new { @class = "svg-user" })
                        <span>@SharedResources.Friends</span>
                    </div>
                    <div class="files" data-files-count="{{::recommendedBox.itemCount}}">
                        @Html.Svg("~/Images/Defs.svg", "document", new { @class = "svg-doc" })
                        <span>@SharedResources.Files</span>
                    </div>
                </div>
            </li>
        </ul>
    </section>
</section>

<section class="menu" id="sidemenu" toggle-menu>
    <h2 class="lFloat">@DashboardResources.Settings</h2>
    <div class="userDetailsWpr">
        <img class="lFloat" ng-src="{{::root.user.image}}" width="52" height="52">
        <div class="userDetails">
            <div class="elps">{{::root.user.name}}</div>
            <div>{{::root.user.points}}</div>
        </div>
    </div>
    <ul class="menuItems">
        <li>
            <a href="@Url.Action("TermsOfService", "Home")" target="_self"
               analytics-on analytics-event="Click on term of service" analytics-category="Dashboard sidebar">                
                @Html.Svg("~/Images/Defs.svg", "file", new { @class = "svg-file" })
                @SharedResources.TermsOfServices
            </a>
        </li>
        <li>
            <a href="@Url.Action("AboutUs","home")" target="_self"
               analytics-on analytics-event="Click on about us" analytics-category="Dashboard sidebar">
                @Html.Svg("~/Images/Defs.svg", "info", new { @class = "svg-info" })
                @DashboardResources.AboutUs
            </a>
        </li>
        <li>
            <a href="@Url.Action("LogOff","Account")" target="_self"
               analytics-on analytics-event="Click on logout" analytics-category="Dashboard sidebar">
                @Html.Svg("~/Images/Defs.svg", "arrow", new { @class = "svg-arrow ltr" })
                @DashboardResources.LogOut
            </a>
        </li>
    </ul>
    <button type="button" class="closeBtn" id="closeMenuBtn">
        @Html.Svg("~/Images/Defs.svg", "close", new { @class = "svg-close" })
    </button>
</section>