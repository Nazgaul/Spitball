<template>
    <div class="ask_question">
        <v-container class="general-cell">
            <v-layout row wrap>
                <v-flex xs12>
                    <div class="header-row">
                        <div class="student_icon">
                            <img :src="require(`./img/student_ask.png`)"/>
                        </div>
                        <span class="text-blue">Get Your Question Answered</span>
                        <button class="back-button" @click="$router.go(-1)">
                            <v-icon right>sbf-close</v-icon>
                        </button>
                    </div>
                </v-flex>


                <extended-text-area uploadUrl="/api/upload/ask"
                                    v-model="textAreaValue"
                                    @addFile="addFile"
                                    actionType="question"
                                    :error="errorTextArea"
                                    @removeFile="removeFile"></extended-text-area>

                <v-flex xs6 :class="{'has-error':!subject && errorMessageSubject}" class="inputBorder">
                    <select v-model="subject">
                        <option value="" disabled hidden>Pick a subject</option>
                        <option v-for="item in subjectList" :value="item">{{item.subject}}</option>
                    </select>
                </v-flex>
                <v-flex xs6 v-if="!subject" class="input-error">
                    <span>{{errorMessageSubject}}</span>
                </v-flex>

                  <v-flex xs12 v-if="currentSum"
                        :class="[currentSum>=0 ? 'text-blue' : 'text-red', 'my-points','subheading']">You have
                    {{currentSum | fixedPoints}} SBL
                </v-flex>
                <v-flex xs12 v-if="price > 100" :class="[price < 100 ? 'text-blue' : 'text-red']">
                    The max. number of SBL is 100 per question
                </v-flex>
                <v-flex xs12 v-else-if="price < 1 && price" :class="[price > 1 ? 'text-blue' : 'text-red']">
                    The min. number of SBL is 1 per question
                </v-flex>
                <!-- </v-flex> -->

                <v-flex xs12 class="mb-0">
                    <div class="points-list">
                        <div class="points-line">
                            <div class="point-btn" :class="`pts-${pricey}`" v-for="(pricey,index) in pricesList"
                                 v-if="index<3" :key="index">
                                <input :id="`${pricey}pts`" class="automatic-amount" type="radio" name="price"
                                       :value="pricey" v-model="selectedPrice">
                                <label :for="`${pricey}pts`">{{pricey}} SBL</label>
                            </div>
                        </div>
                        <div class="points-line">
                            <div class="point-btn" :class="`pts-${pricey}`" v-for="(pricey,index) in pricesList"
                                 v-if="index>=3" :key="index">
                                <input :id="`${pricey}pts`" class="automatic-amount" type="radio" name="price"
                                       :value="pricey" v-model="selectedPrice">
                                <label :for="`${pricey}pts`">{{pricey}} SBL</label>
                            </div>
                            <div class="point-btn other inputBorder">
                                <input type="number" placeholder="Other amount"
                                       @focus="selectOtherAmount()" step="1"
                                       min="1" max="100"
                                       v-model="price"/>
                                <v-icon right>sbf-hand-coin</v-icon>
                            </div>
                        </div>
                    </div>
                </v-flex>

                <v-flex xs12 class="error-block">
                    <div v-if="errorSelectPrice.length && !selectedPrice && !price" class="error-message">
                        {{errorSelectPrice}}
                    </div>

                </v-flex>

                <v-flex xs12 class="last-text-block">
                    <p class="text-xs-center"><span class="text-blue" style="color:#8888d5;">Tip:</span>&nbsp;A fair
                        price will make the sale</p>
                </v-flex>
                <v-flex class="submit-btn-wrap" xs12>
                    <div v-if="currentSum < 0" class="error-message">You do not have sufficient SBL</div>
                    <v-btn block color="primary" @click="submitQuestion()" :disabled="submitted"
                           class="ask_btn">Ask
                    </v-btn>
                </v-flex>

            </v-layout>

            <!-- <div class="btn-div">
              <button @click=ask() :disabled="!validForm">Ask</button>
            </div> -->
        </v-container>
    </div>
</template>
<script src="./newQuestion.js"></script>
<style src="./newQuestion.less" lang="less"></style>
