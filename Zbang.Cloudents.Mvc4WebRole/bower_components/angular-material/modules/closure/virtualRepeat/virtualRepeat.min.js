/*!
 * Angular Material Design
 * https://github.com/angular/material
 * @license MIT
 * v0.11.3
 */
function VirtualRepeatContainerDirective(){return{controller:VirtualRepeatContainerController,template:virtualRepeatContainerTemplate,compile:function(n,t){n.addClass("md-virtual-repeat-container").addClass(t.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function virtualRepeatContainerTemplate(n){return'<div class="md-virtual-repeat-scroller"><div class="md-virtual-repeat-sizer"><\/div><div class="md-virtual-repeat-offsetter">'+n[0].innerHTML+"<\/div><\/div>"}function VirtualRepeatContainerController(n,t,i,r,u){this.$scope=i;this.$element=r;this.$attrs=u;this.size=0;this.scrollSize=0;this.scrollOffset=0;this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal");this.repeater=null;this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink");this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0;this.originalSize=null;this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0;this.$attrs.mdTopIndex?(this.bindTopIndex=t(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),angular.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,angular.bind(this,function(n){n!==this.topIndex&&this.scrollToIndex(n)}))):this.topIndex=0;this.scroller=r[0].getElementsByClassName("md-virtual-repeat-scroller")[0];this.sizer=this.scroller.getElementsByClassName("md-virtual-repeat-sizer")[0];this.offsetter=this.scroller.getElementsByClassName("md-virtual-repeat-offsetter")[0];n(angular.bind(this,this.updateSize));u.ngHide&&i.$watch(u.ngHide,angular.bind(this,function(t){t||n(angular.bind(this,this.updateSize))}))}function VirtualRepeatDirective(n){return{controller:VirtualRepeatController,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(t,i){var u=i.mdVirtualRepeat,r=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),f=r[1],e=n(r[2]),o=i.mdExtraName&&n(i.mdExtraName);return function(n,t,i,r,u){r[0].link_(r[1],u,f,e,o)}}}}function VirtualRepeatController(n,t,i,r,u,f){this.$scope=n;this.$element=t;this.$attrs=i;this.$browser=r;this.$document=u;this.$$rAF=f;this.onDemand=i.hasOwnProperty("mdOnDemand");this.browserCheckUrlChange=r.$$checkUrlChange;this.newStartIndex=0;this.newEndIndex=0;this.newVisibleEnd=0;this.startIndex=0;this.endIndex=0;this.itemSize=n.$eval(i.mdItemSize)||null;this.isFirstRender=!0;this.itemsLength=0;this.unwatchItemSize_=angular.noop;this.blocks={};this.pooledBlocks=[]}function VirtualRepeatModelArrayLike(n){if(!angular.isFunction(n.getItemAtIndex)||!angular.isFunction(n.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ");this.model=n}function abstractMethod(){throw Error("Non-overridden abstract method called.");}goog.provide("ng.material.components.virtualRepeat");goog.require("ng.material.core");angular.module("material.components.virtualRepeat",["material.core"]).directive("mdVirtualRepeatContainer",VirtualRepeatContainerDirective).directive("mdVirtualRepeat",VirtualRepeatDirective);var MAX_ELEMENT_SIZE=1533917,NUM_EXTRA=3;VirtualRepeatContainerController.$inject=["$$rAF","$parse","$scope","$element","$attrs"];VirtualRepeatContainerController.prototype.register=function(n){this.repeater=n;angular.element(this.scroller).on("scroll wheel touchmove touchend",angular.bind(this,this.handleScroll_))};VirtualRepeatContainerController.prototype.isHorizontal=function(){return this.horizontal};VirtualRepeatContainerController.prototype.getSize=function(){return this.size};VirtualRepeatContainerController.prototype.setSize_=function(n){this.size=n;this.$element[0].style[this.isHorizontal()?"width":"height"]=n+"px"};VirtualRepeatContainerController.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.repeater&&this.repeater.containerUpdated())};VirtualRepeatContainerController.prototype.getScrollSize=function(){return this.scrollSize};VirtualRepeatContainerController.prototype.sizeScroller_=function(n){var i=this.isHorizontal()?"width":"height",f=this.isHorizontal()?"height":"width",r,t,u;if(n<MAX_ELEMENT_SIZE)this.sizer.style[i]=n+"px";else{for(this.sizer.innerHTML="",this.sizer.style[i]="auto",this.sizer.style[f]="auto",r=Math.floor(n/MAX_ELEMENT_SIZE),t=document.createElement("div"),t.style[i]=MAX_ELEMENT_SIZE+"px",t.style[f]="1px",u=0;u<r;u++)this.sizer.appendChild(t.cloneNode(!1));t.style[i]=n-r*MAX_ELEMENT_SIZE+"px";this.sizer.appendChild(t)}};VirtualRepeatContainerController.prototype.autoShrink_=function(n){var t=Math.max(n,this.autoShrinkMin*this.repeater.getItemSize());this.autoShrink&&t!==this.size&&(t<(this.originalSize||this.size)?(this.originalSize||(this.originalSize=this.size),this.setSize_(t)):this.originalSize&&(this.setSize_(this.originalSize),this.originalSize=null))};VirtualRepeatContainerController.prototype.setScrollSize=function(n){var t=n+this.offsetSize;this.scrollSize!==t&&(this.sizeScroller_(t),this.autoShrink_(t),this.scrollSize=t)};VirtualRepeatContainerController.prototype.getScrollOffset=function(){return this.scrollOffset};VirtualRepeatContainerController.prototype.scrollTo=function(n){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=n;this.handleScroll_()};VirtualRepeatContainerController.prototype.scrollToIndex=function(n){var i=this.repeater.getItemSize(),t=this.repeater.itemsLength;n>t&&(n=t-1);this.scrollTo(i*n)};VirtualRepeatContainerController.prototype.resetScroll=function(){this.scrollTo(0)};VirtualRepeatContainerController.prototype.handleScroll_=function(){var i=this.isHorizontal()?this.scroller.scrollLeft:this.scroller.scrollTop,n,u,r,t;i!==this.scrollOffset&&(n=this.repeater.getItemSize(),n)&&(u=Math.max(0,Math.floor(i/n)-NUM_EXTRA),r=this.isHorizontal()?"translateX(":"translateY(",r+=u*n+"px)",this.scrollOffset=i,this.offsetter.style.webkitTransform=r,this.offsetter.style.transform=r,this.bindTopIndex&&(t=Math.floor(i/n),t!==this.topIndex&&t<this.repeater.itemsLength&&(this.topIndex=t,this.bindTopIndex.assign(this.$scope,t),this.$scope.$root.$$phase||this.$scope.$digest())),this.repeater.containerUpdated())};VirtualRepeatDirective.$inject=["$parse"];VirtualRepeatController.$inject=["$scope","$element","$attrs","$browser","$document","$$rAF"];VirtualRepeatController.Block;VirtualRepeatController.prototype.link_=function(n,t,i,r,u){this.container=n;this.transclude=t;this.repeatName=i;this.rawRepeatListExpression=r;this.extraName=u;this.sized=!1;this.repeatListExpression=angular.bind(this,this.repeatListExpression_);this.container.register(this)};VirtualRepeatController.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope);this.parentNode=this.$element[0].parentNode;var n=this.getBlock_(0);n.element[0].parentNode||this.parentNode.appendChild(n.element[0]);this.itemSize=n.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null;this.blocks[0]=n;this.poolBlock_(0);this.itemSize&&this.containerUpdated()}};VirtualRepeatController.prototype.repeatListExpression_=function(n){var t=this.rawRepeatListExpression(n),i;return this.onDemand&&t?(i=new VirtualRepeatModelArrayLike(t),i.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),i):t};VirtualRepeatController.prototype.containerUpdated=function(){if(this.itemSize)this.sized||(this.items=this.repeatListExpression(this.$scope));else{this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,function(n){n&&n.length&&this.$$rAF(angular.bind(this,this.readItemSize_))}));this.$scope.$root.$$phase||this.$scope.$digest();return}this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,angular.bind(this,this.virtualRepeatUpdate_)));this.updateIndexes_();(this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof VirtualRepeatModelArrayLike&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items))};VirtualRepeatController.prototype.getItemSize=function(){return this.itemSize};VirtualRepeatController.prototype.virtualRepeatUpdate_=function(n,t){var u=n&&n.length||0,o=!1,h,i,r,f,e,s;if(this.items&&u<this.items.length&&this.container.getScrollOffset()!==0){this.items=n;this.container.resetScroll();return}for(u!==this.itemsLength&&(o=!0,this.itemsLength=u),this.items=n,(n!==t||o)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,o&&this.container.setScrollSize(u*this.itemSize),this.isFirstRender&&(this.isFirstRender=!1,h=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex,this.container.scrollToIndex(h)),Object.keys(this.blocks).forEach(function(n){var t=parseInt(n,10);(t<this.newStartIndex||t>=this.newEndIndex)&&this.poolBlock_(t)},this),this.$browser.$$checkUrlChange=angular.noop,f=[],e=[],i=this.newStartIndex;i<this.newEndIndex&&this.blocks[i]==null;i++)r=this.getBlock_(i),this.updateBlock_(r,i),f.push(r);for(;this.blocks[i]!=null;i++)this.updateBlock_(this.blocks[i],i);for(s=i-1;i<this.newEndIndex;i++)r=this.getBlock_(i),this.updateBlock_(r,i),e.push(r);f.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(f),this.$element[0].nextSibling);e.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(e),this.blocks[s]&&this.blocks[s].element[0].nextSibling);this.$browser.$$checkUrlChange=this.browserCheckUrlChange;this.startIndex=this.newStartIndex;this.endIndex=this.newEndIndex};VirtualRepeatController.prototype.getBlock_=function(n){if(this.pooledBlocks.length)return this.pooledBlocks.pop();var t;return this.transclude(angular.bind(this,function(i,r){t={element:i,"new":!0,scope:r};this.updateScope_(r,n);this.parentNode.appendChild(i[0])})),t};VirtualRepeatController.prototype.updateBlock_=function(n,t){(this.blocks[t]=n,n.new||n.scope.$index!==t||n.scope[this.repeatName]!==this.items[t])&&(n.new=!1,this.updateScope_(n.scope,t),this.$scope.$root.$$phase||n.scope.$digest())};VirtualRepeatController.prototype.updateScope_=function(n,t){n.$index=t;n[this.repeatName]=this.items&&this.items[t];this.extraName&&(n[this.extraName(this.$scope)]=this.items[t])};VirtualRepeatController.prototype.poolBlock_=function(n){this.pooledBlocks.push(this.blocks[n]);this.parentNode.removeChild(this.blocks[n].element[0]);delete this.blocks[n]};VirtualRepeatController.prototype.domFragmentFromBlocks_=function(n){var t=this.$document[0].createDocumentFragment();return n.forEach(function(n){t.appendChild(n.element[0])}),t};VirtualRepeatController.prototype.updateIndexes_=function(){var n=this.items?this.items.length:0,t=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(n-t,Math.floor(this.container.getScrollOffset()/this.itemSize)));this.newVisibleEnd=this.newStartIndex+t+NUM_EXTRA;this.newEndIndex=Math.min(n,this.newVisibleEnd);this.newStartIndex=Math.max(0,this.newStartIndex-NUM_EXTRA)};VirtualRepeatModelArrayLike.prototype.$$includeIndexes=function(n,t){for(var i=n;i<t;i++)this.hasOwnProperty(i)||(this[i]=this.model.getItemAtIndex(i));this.length=this.model.getLength()};ng.material.components.virtualRepeat=angular.module("material.components.virtualRepeat");