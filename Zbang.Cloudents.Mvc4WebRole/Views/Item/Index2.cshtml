@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Item.Resources
@{
    const string svgUrl = "~/images/site/itemIcons.svg";
}
<div class="full-screen" srph-infinite-scroll="i.loadMore()" container="true" unregister-scroll="true">
    <header class="color-override backgroundColor2 borderColor2">
        <div layout="row" layout-align="space-between center">
            <div class="fb-like" ng-class="{blue : i.details.like}">
                <button user-not-register-popup="click" type="button" ng-click="i.like()" ga-track-event="['itemPage', 'like item']">
                    <div class="content">
                        @Html.Svg("~/images/site/box-icons.svg", "like", new { @class = "color-override svgColor8" })
                        <span class="like-text color-override textColor3">
                            {{i.details.likes}} @GeneralResources.Like
                        </span>
                    </div>
                </button>
            </div>

            <div class="item-actions">
                <a target="{{::i.details.type == 'File' ? '_self' : '_blank'}}" user-not-register-popup="click" href="{{i.details.downloadUrl}}" ga-track-event="['itemPage', 'download']">@Html.Svg(svgUrl, "download", new { @class = "color-override svgColor3" })</a>
                <a target="_blank" user-not-register-popup="click" href="{{i.details.printUrl}}" ga-track-event="['itemPage', 'print']">@Html.Svg(svgUrl, "print", new { @class = "color-override svgColor3" })</a>
                <md-menu flex>
                    <md-button aria-label="open menu" class="md-icon-button" user-not-register-popup="click" ng-click="app.openMenu($mdOpenMenu, $event)" ga-track-event="['itemPage', 'delete']">
                        @Html.Svg("~/images/site/icons.svg", "ThreeDots", new { @class = "dots-3 color-override svgColor3" })
                    </md-button>
                    <md-menu-content width="1">
                        <md-menu-item>
                            <md-button class="text-capitalize" ng-click="i.showRename()" ga-track-event="['itemPage', 'rename']">
                                @GeneralResources.Rename
                            </md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="i.selectedState = i.state.flag" ga-track-event="['itemPage', 'flag']">
                                @ItemsResources.Flag
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
            <button class="close-btn" type="button" ng-click="app.back(i.details.boxUrl)" ga-track-event="['itemPage', 'close']">@Html.Svg("~/images/site/icons.svg", "close", new { @class = "color-override svgColor3" })</button>
        </div>
        <md-progress-linear ng-if="i.loader" md-mode="indeterminate"></md-progress-linear>
    </header>

  

    <div class="full-screen-body" md-swipe-left="i.swipeLeft()" md-swipe-right="i.swipeRight()">

        <div class="fileName">
            <div class="name-info" layout="row" layout-align="center center" ng-if="i.selectedState === i.state.regular">
                <span class="ellipsis">{{i.details.name}}</span>
                <a class="info" href="#" tooltip-placement="bottom" tooltip-class="copy-right"
                   uib-tooltip="@ItemsResources.CopyRight">@Html.Svg(svgUrl, "info")</a>
            </div>
            <form name="renameItem" class="rename-form" novalidate ng-submit="i.renameItem(renameItem)" ng-if="i.selectedState === i.state.rename">
                <md-content>
                    <md-input-container flex>
                        <label class="text-capitalize">@ItemsResources.Name</label>
                        <input focus-me="i.selectedState === i.state.rename" autocomplete="off" required ng-model="i.renameText" name="name" />
                        <div ng-messages="renameItem.name.$error" ng-show="renameItem.name.$dirty">
                            <div ng-message="required">@GeneralResources.RequiredField</div>
                        </div>
                    </md-input-container>
                </md-content>

                <span layout="row" layout-align="end center  text-capitalize">
                    <button type="button" class="btn grey btn-default" ng-click="i.selectedState = i.state.regular" ga-track-event="['itemPage', 'cancel rename']">@GeneralResources.Cancel</button>
                    <button type="submit" class="btn blue" ng-disabled="!renameItem.$valid || i.submitDisabled" ga-track-event="['itemPage', 'save rename']">@ItemsResources.Save</button>
                </span>
            </form>

            @{ Html.RenderPartial("_FlagItem");}
        </div>
        <div class="arrows" layout="row" layout-align="space-between center" hide-xs>
            <a ng-if=" i.details.previous" href="{{i.details.previous}}" hide-xs class="arrow left" ga-track-event="['itemPage', 'previous item']">
            @Html.Svg("~/images/site/icons.svg", "arrow")</a>
            <a ng-if="i.details.next" href="{{i.details.next}}" hide-xs class="arrow right" ga-track-event="['itemPage', 'next item']">@Html.Svg("~/images/site/icons.svg", "arrow")</a>
        </div>
        
        @{ Html.RenderPartial("_ItemComments");}
        <div class="preview" ng-bind-html="i.preview">
        </div>
    </div>
</div>
