@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Item.Resources


@model Zbang.Zbox.ViewModel.DTOs.ItemDtos.QuizWithDetailDto

<div id="quiz" class="page itemPage quizPage">
    <div class="leftPanel lFloat">
        <div class="itemTop">
            <div class="moreFilesThumb lFloat"></div>
            <div class="itemNameWpr">
                <div class="item-name semiFont"><span role="textbox" class="itemNameText">@Model.Name</span></div>
            </div>
            <div class="itemOwner elps">
                <span class="calloutTrgr" data-uid="@Model.OwnerId">@Model.Owner</span>
            </div>
            <span class="lFloat" data-bind="text: update">@Model.Date.ToString("d/M/yy")</span>
            <button type="button" class="itemFlag rFloat" data-bind="click: flagItem, visible: flagAllow()">@ItemsResources.Flag</button>
            <div class="actions">
                <span data-title="@SharedResources.Views" class="lFloat views" data-bind="text: numberOfViews">@Model.NumberOfViews</span>

                <div class="rFloat rateContainer">
                    <span class="stars">
                        <span class="full" data-bind="style: { width: rate() + 'px' }"></span>
                    </span>
                    <button type="button" class="rateBtn"></button>
                    <div class="bubble">
                        <div class="arrow upArrow"></div>
                        <div data-step2="@ItemsResources.Thankyou" data-step1="@ItemsResources.RateItem" class="bubbleText"></div>

                        <ul class="rateList">
                            <li class="star">5</li>
                            <li class="star star4">4</li>
                            <li class="star star3">3</li>
                            <li class="star star2">2</li>
                            <li class="star star1">1</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
        <h3 class="sectionHeader">@QuizResources.QuizSummary</h3>
        <div class="timeWpr0">
            <button class="btn1 rFloat" data-quiz-play="@QuizResources.Play" data-quiz-pause="@QuizResources.Pause">@QuizResources.Pause</button>
            <div data-timer-label="@QuizResources.Timer" class="quizTime">00:12:45</div>
        </div>
        <div class="userResults">
            <div class="userScore" data-user-score="70">@QuizResources.YourScore:</div>
            <div class="resultsWpr">
                <div>@QuizResources.YouGot:</div>
                <div class="results" data-results="7">@QuizResources.Correct</div>
                <div class="results wrong" data-results="3">@QuizResources.Wrong</div>
            </div>
            <div class="timeWpr">
                <div>@QuizResources.TimeWas:</div>
                <div class="quizTime">00:12:45</div>
                <button class="btn1">@QuizResources.RetakeQuiz</button>
            </div>
        </div>
    </div>
    <div class="itemRight">
        <div class="itemActions topBar barShadow">

            <section class="shareBtn rFloat">
                <input class="checkbox" type="checkbox" id="quizShare" data-ddcbox="itemShare" />
                <label for="itemShare" class="shareBtnTxt iconTop">@SharedResources.Share</label>
                <div class="dropDown shareDD" data-dropdown="itemShare">
                    <label class="closeItem rFloat" for="itemShare"></label>
                    <div class="arrow shareArrow"></div>
                    <h4 class="semiFont">@SharedResources.ShareItem</h4>
                    <div class="shareTxt">@SharedResources.ShareUsing</div>
                    <ul class="shareList">
                        <li class="shareItem">
                            <button type="button" id="quiz_FS" class="fbShare">@SharedResources.Facebook</button></li>

                        @if (User.Identity.IsAuthenticated)
                        {
                            <li class="shareItem">
                                <button type="button" id="quiz_msg" class="emailShare">@SharedResources.Email</button></li>
                        }
                    </ul>
                    <div class="shareTxt">@SharedResources.OrCopyLink</div>
                    <input type="text" id="quiz_CL" class="linkShare elps" readonly="readonly" data-bind="value: copyLink" />
                </div>
            </section>

            <a class="backWpr elps lFloat" data-navigation="Box" data-bind=" attr: { href: boxurl }">
                <div>@ItemsResources.Backto</div>
                <h2 class="semiFont elps" data-bind="text: boxName">Box name here</h2>
            </a>
            <button type="button" class="itemPrint iconTop" id="quiz_P" data-link="@Url.Action("Print", "Item")">@ItemsResources.Print</button>
        </div>
        <div class="quizTitle" data-questioncount="3">@QuizResources.MultipleChoice</div>
        <div class="quizPrevWpr">

            @{
                var questionIndex = 0;
               
            }
            @*Ram: If user didn't answer a question:
            1) add class noAnswer on that li
            2) add attr: data-no-answer="@QuizResources.NoAnswer on that li*@
            <ul class="quizQList" data-no-answer="@QuizResources.NoAnswer >
                @foreach (var item in Model.Questions)
                {
                    var answerIndex = 0;
                    //add userCorrect class if UserControl answered the question correctly
                    //add userWrong class if UserControl answered incorrectly OR no answer
                    //add noAnswer class in addition to userWrong if user gave no answer
                    <li class="userCorrect">
                        <div>@item.Text</div>
                        <ul class="quizAList">
                            @foreach (var answer in item.Answers)
                            {
                                //add correct class if it is the correct answer
                                //add wrong if user chose this as the answer incorrectly
                                <li class="correct">
                                <input id="@string.Format("quizTestRadio{0}{1}", questionIndex, answerIndex)" type="radio" class="correctAnswer" name="@string.Format("quizTestRadio", questionIndex)" />
                                <label for="@string.Format("quizTestRadio{0}{1}", questionIndex, answerIndex)">@answer.Text</label>
                            </li>
                                answerIndex++;
                            }
                            
                        </ul>
                    </li>
                    questionIndex++;
                }
                
                    <div>Why did the duck cross the road?</div>
                    <ul class="quizAList">
                        <li class="correct">
                            <input id="quizTestRadio{{topIndex}}{{index}}11" type="radio" class="correctAnswer" name="quizTestRadio1" />
                            <label for="quizTestRadio{{topIndex}}{{index}}11">To get to the other side</label>
                        </li>
                        <li>
                            <input id="quizTestRadio{{topIndex}}{{index}}12" type="radio" name="quizTestRadio1" />
                            <label for="quizTestRadio{{topIndex}}{{index}}12">To prove he's no chicken</label>
                        </li>

                        <li>
                            <input id="quizTestRadio{{topIndex}}{{index}}13" type="radio" name="quizTestRadio1" />
                            <label for="quizTestRadio{{topIndex}}{{index}}13">because it was the chicken's day off</label>
                        </li>
                    </ul>
                </li>

                <li class="userWrong" data-no-answer="@QuizResources.NoAnswer">
                    <div>Why did the duck cross the road?</div>
                    <ul class="quizAList">
                        <li>
                            <input id="quizTestRadio{{topIndex}}{{index}}21" type="radio" class="correctAnswer" name="quizTestRadio2" />
                            <label for="quizTestRadio{{topIndex}}{{index}}21">To get to the other side</label>
                        </li>
                        <li class="correct">
                            <input id="quizTestRadio{{topIndex}}{{index}}22" type="radio" name="quizTestRadio2" />
                            <label for="quizTestRadio{{topIndex}}{{index}}22">To prove he's no chicken</label>
                        </li>
                        <li class="wrong">
                            <input id="quizTestRadio{{topIndex}}{{index}}23" type="radio" name="quizTestRadio2" />
                            <label for="quizTestRadio{{topIndex}}{{index}}23">because it was the chicken's day off</label>
                        </li>
                    </ul>
                </li>

                <li class="userWrong noAnswer" thjr rjhn ryjrwtyj wrtyjn rwtjn rwtj rwtjn">
                    <div>Why did the duck cross the road?</div>
                    <ul class="quizAList">
                        <li>
                            <input id="quizTestRadio{{topIndex}}{{index}}31" type="radio" class="correctAnswer" name="quizTestRadio3" />
                            <label for="quizTestRadio{{topIndex}}{{index}}31">To get to the other side</label>
                        </li>
                        <li class="correct">
                            <input id="quizTestRadio{{topIndex}}{{index}}32" type="radio" name="quizTestRadio3" />
                            <label for="quizTestRadio{{topIndex}}{{index}}32">To prove he's no chicken</label>
                        </li>
                        <li>
                            <input id="quizTestRadio{{topIndex}}{{index}}33" type="radio" name="quizTestRadio3" />
                            <label for="quizTestRadio{{topIndex}}{{index}}33">because it was the chicken's day off</label>
                        </li>
                    </ul>
                </li>
            </ul>
            <button class="btn1">@QuizResources.CheckAnswers</button>
        </div>
    </div>
</div>
