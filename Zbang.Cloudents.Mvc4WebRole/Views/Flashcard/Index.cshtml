<div @*ng-switch="f.step"*@ ng-switch="f.step" class="flashcard-wrapper">
    <div class="header">
        <button class="close-btn">
            <md-icon md-svg-icon="t:close"></md-icon>
        </button>
        <div multiswitch-when="1|2" class="progress-wrapper">
            <div class="title">
                <md-icon md-svg-icon="b:flashcard-icon"></md-icon>
                <h4>cards</h4>
            </div>
            <div class="progress-settings">
                <md-menu hide-gt-xs>
                    <md-button class="md-icon-button sides" ng-click="app.openMenu($mdOpenMenu, $event)">
                        <md-icon md-svg-icon="t:settingMenu"></md-icon>
                    </md-button>
                    <md-menu-content width="1">
                        <md-menu-item>
                            <md-button ng-click="f.style=true">front</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="f.style=false">back</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="f.style=null">both</md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
                <div class="progress-line">
                    <md-progress-linear md-mode="determinate" value="{{f.slidepos / f.cards.length * 100}}"></md-progress-linear>
                    <span hide-gt-xs>{{f.slidepos}}/{{::f.flashcard.cards.length}}</span>
                </div>
            </div>
            <div class="progress-text" hide-xs>
                <span>progress</span>
                <span>{{f.slidepos}}/{{::f.flashcard.cards.length}}</span>
            </div>
        </div>
        <div multiswitch-when="1" class="card-sides" hide-xs>
            <button type="button" ng-click="f.style=true" ng-class="{active:f.style===true}">
                <md-icon md-svg-icon="b:flashcard-icon"></md-icon>
                front
            </button>
            <button type="button" ng-click="f.style=false" ng-class="{active:f.style===false}">
                <md-icon md-svg-icon="b:flashcard-icon"></md-icon>
                back
            </button>
            <button type="button" ng-click="f.style=null" ng-class="{active:f.style==null}">
                <md-icon md-svg-icon="b:flashcard-icon"></md-icon>
                both
            </button>
        </div>
        <div multiswitch-when="2" class="pinned-counter">
            <div class="num" ng-bind="::f.pinCount"></div>
            <div class="icon">
                <md-icon md-svg-icon="b:pin"></md-icon>
                <div>pinned</div>
            </div>
        </div>
    </div>
    <div multiswitch-when="0|2" class="cards-info">
        <div class="content card-template">
            <h1 ng-if="f.step==0" ng-bind="::f.flashcard.name"></h1>
            <h1 ng-if="f.step==2">Nice work!</h1>
            <div class="subtitle">
                <h4 ng-if="f.step==2">You just studied&nbsp;</h4>
                <ng-pluralize count="::f.flashcard.cards.length"
                              when="{
                        '1': '1 card!',
                        'other': '{} cards!'
                      }"></ng-pluralize>
            </div>
            <div class="action-buttons">
                <button type="button" class="action-btn" ng-click="f.start()">
                    <span>start</span><span ng-if="f.step==2">&nbsp;over</span>
                </button>
                <button type="button" class="action-btn pinned-cards" ng-if="::f.pinCount" ng-click="f.startPin()">
                    Study&nbsp;<ng-pluralize count="::f.pinCount"
                                             when="{
                        '1': '1 pin',
                        'other': '{} pinned'
                      }"></ng-pluralize>
                </button>
            </div>
            <div class="shuffle">
                <md-icon md-svg-icon="b:shuffle"></md-icon>
                <md-switch ng-model="f.shuffle">
                    shuffle cards
                </md-switch>
            </div>
            <div ng-if="f.step==2" class="like-wrapper">
                <span>Enjoy this set? give it a like:</span>&nbsp;
                <button ng-click="f.like()" ng-class="{liked:f.flashcard.like}"><md-icon md-svg-icon="b:like"></md-icon>Like</button>
            </div>
        </div>
    </div>
    <div multiswitch-when="1" class="card-player" card-scroll>
        <div ng-attr-id="card{{::$index}}" class="card-template" ng-hide="$index !== f.slidepos" ng-class="{front: f.style==true,back:f.style==false,both:f.style==null}" ng-repeat="slide in ::f.cards">
            <button type="button" class="pin-btn" ng-click="f.pin()" ng-class="{pinned:slide.pin}">
                <md-icon md-svg-icon="b:pin"></md-icon>
            </button>
            <div class="card-content">
                <div class="side front">
                    <div class="img-container" ng-if="::slide.front.image">
                        <img ng-src="{{::slide.front.image}}" alt="font image"/>
                    </div>
                    <div class="text-container">
                        <p dir="auto" ng-bind="::slide.front.text" fit-text></p>
                    </div>
                </div>
                <div class="side back">
                    <div class="img-container" ng-if="::slide.cover.image">
                        <img ng-src="{{::slide.cover.image}}" alt="font image"/>
                    </div>
                    <div class="text-container">
                        <p dir="auto" ng-bind="::slide.cover.text" fit-text></p>
                    </div>
                </div>
            </div>
            <button type="button" class="flip-btn" ng-if="f.style !== null" ng-click="f.style = !f.style">
                <md-icon md-svg-icon="b:flip"></md-icon>
                Click to flip
            </button>
            
        </div>
    </div>

    <nav multiswitch-when="1|2" class="buttons">
        <button type="button" class="prev" keyboard-action="37" ng-click="f.prev()" ng-disabled="f.slidepos == 0">
            <md-icon md-svg-icon="t:arrow"></md-icon>
        </button>
        <button type="button" class="next" ng-click="f.next()" keyboard-action="39" ng-disabled="f.slidepos == f.flashcard.cards.length">
            <md-icon md-svg-icon="t:arrow"></md-icon>
        </button>
    </nav>
</div>
