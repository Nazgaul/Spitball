@using Zbang.Cloudents.Mvc4WebRole.Views.Box.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources


<form novalidate remove-keyboard ng-submit="i.filter()" class="search-box">
    <input user-not-register-popup="focus" type="search" placeholder="@BoxResources.Search" ng-model="i.term" ng-model-options="{debounce : 300}" ng-change="i.filter()" ng-minlength="2" />
</form>
@{ Html.RenderPartial("_Tabs");}


<ul layout="row" layout-padding layout-fill layout-wrap class="list-unstyled" srph-infinite-scroll="i.myPagingFunction()">
    <li flex-gt-lg="10" flex-lg="20" flex-md="25" flex-sm="33" hide-xs class="item-animate add-button"  ng-click="i.openUpload()" ga-track-event="['box-items', 'addFile']">
        <div class="content ">
            <button type="button">
                <md-icon md-svg-icon="t:add"></md-icon>
                @*@Html.Svg("~/images/site/icons.svg", "add")*@
                <div class="text">
                    @IndexResources.UploadFiles
                </div>
            </button>
        </div>
    </li>
    <li flex-gt-lg="10" flex flex-lg="20" flex-md="25" flex-sm="33" flex-xs="50" class="item-animate i-q-wrapper" ng-repeat="e in i.items track by e.id ">
        <div ui-draggable="true" drag="e" drag-image-element-id="'drag' + $index" ng-include="'item-template.html'"></div>
        <md-menu class="item-menu">
            <md-button aria-label="open menu" class="md-icon-button delete" ng-click="app.openMenu($mdOpenMenu, $event)" ga-track-event="['box-items', 'deleteFile']">
                <md-icon md-svg-icon="t:ThreeDots" class="dots-3"></md-icon>
                @*@Html.Svg("~/images/site/icons.svg", "ThreeDots", new {@class = "dots-3"})*@
            </md-button>
            <md-menu-content width="1">
                <md-menu-item ng-if="b.canDelete(e.ownerId)">
                    <md-button ng-click="i.deleteItem($event,e)" ga-track-event="['box-items', 'didDelete']">
                        @GeneralResources.Delete
                    </md-button>
                </md-menu-item>
                <md-menu-item ng-if="stateParams.tabId">
                    <md-button ng-click="i.removeItemFromTab(e)" ga-track-event="['box-tabs', 'didDelete']">
                        @BoxResources.ItemRemoveFolder
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button aria-label="download" ng-href="{{::e.downloadLink}}" target="_blank" ga-track-event="['box-items', 'download']">
                        <span ng-if="e.type!=='Link'">@GeneralResources.Download</span>
                        <span ng-if="e.type==='Link'">@GeneralResources.View</span>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </li>
</ul>
<button type="button" class="add" hide show-xs ng-click="i.openUpload()" ng-show="i.uploadShow" ga-track-event="['box-items', 'addFile']">
    <md-icon md-svg-icon="t:add"></md-icon>
    @*@Html.Svg("~/images/site/icons.svg", "add")*@
</button>
