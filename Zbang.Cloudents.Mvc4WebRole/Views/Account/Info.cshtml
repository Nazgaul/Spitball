@using Zbang.Cloudents.Mvc4WebRole.Views.Item.Resources
@using Zbang.Zbox.Infrastructure.Enums
@using Zbang.Cloudents.Mvc4WebRole.Views.Account.Resources;
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources

<div class="tab-pane active" id="info">
    <div class="form-group">
        <div class="section">
            <div class="fileinput text-capitalize">
                <h2>@AccountResource.Profile</h2>
                <div class="thumbnail" style="width: 150px; height: 150px;">
                    <img ng-if="i.data.image" ng-src="{{i.data.image}}" alt="" width="150" height="150" />
                    <div class="ov-hidden">
                        <a plupload="i.fileUpload.url" plupload-options="i.fileUpload.options" class="ontop" plupload-callbacks="i.fileUpload.callbacks" ga-track-event="['settings', 'change user image']">
                            @AccountResource.SelectImg
                        </a>
                    </div>
                </div>
            </div>
            <form name="changeName" class="text-capitalize" ng-submit="i.submit()">
                <div layout layout-sm="column">
                    <md-input-container flex class="left-flex">
                        <label>@AccountResource.First</label>
                        <input required autocomplete="off" type="text" name="firstName" ng-model="i.data.firstName" />
                        <div ng-messages="changeName.firstName.$error" ng-show="changeName.firstName.$dirty">
                            <div ng-message="required">@GeneralResources.RequiredField</div>
                        </div>
                    </md-input-container>
                    <md-input-container flex>
                        <label>@AccountResource.Last</label>
                        <input required autocomplete="off" type="text" name="lastName" ng-model="i.data.lastName" />
                        <div ng-messages="changeName.lastName.$error" ng-show="changeName.lastName.$dirty">
                            <div ng-message="required">@GeneralResources.RequiredField</div>
                        </div>
                    </md-input-container>
                </div>
                <div class="text-right">
                    <button type="button" class="btn btn-default" ng-click="i.cancelChangeName()" ga-track-event="['settings', 'cancel changes']">@GeneralResources.Cancel</button>
                    <button type="submit" ng-disabled="!changeName.$valid || (i.data.lastName === i.original.lastName && i.data.firstName === i.original.firstName)" class="btn btn-primary" ga-track-event="['settings', 'save changes']">@GeneralResources.SaveChanges</button>
                </div>
            </form>
        </div>
        <div class="section">
            <form name="changeEmail" ng-submit="i.changeEmail()">
                @*<div layout layout-sm="column">*@
                <md-input-container>
                    <label class="text-capitalize">@AccountResource.ChangeMail</label>
                    <input type="email" autocomplete="off" required ng-model="i.data.email" />
                </md-input-container>
                <div class="text-right">
                    <button type="button" class="btn btn-default text-capitalize" ng-click="i.cancelChangeEmail()" ga-track-event="['settings', 'cancel changes']">@GeneralResources.Cancel</button>
                    <button type="submit" class="btn btn-primary text-capitalize" ng-disabled="!changeEmail.$valid || i.data.email === i.original.email" ga-track-event="['settings', 'save changes']">@GeneralResources.SaveChanges</button>
                </div>
            </form>
        </div>
        <div class="section">
            <div layout layout-wrap layout-sm="column">
                <div flex layout="row" flex-xs="100" layout-align="start center" class="left-flex university">
                    <img src="{{::i.data.universityImage}}" class="uni-image" alt="university logo" width="50" height="50" />
                    <div layout="column">
                        <span class="uni-name">{{::i.data.university}}</span>
                        <a ui-sref="universityChoose" flex ga-track-event="['settings', 'change university']">@AccountResource.changeUniversityBtn</a>
                    </div>
                </div>
                <md-input-container flex>
                    <label>@AccountResource.Lang</label>
                    <md-select name="notification" md-on-close="i.changeLanguage()" ng-model="i.data.language" md-container-class="dd-list" ng-model-options="{trackBy: '$value'}" ga-track-event="['settings', 'change language']">
                        @foreach (var lang in Zbang.Zbox.Infrastructure.Culture.Languages.SpitballSupportedCultures)
                        {
                            <md-option value="@lang.Culture">@lang.Name</md-option>
                        }
                    </md-select>
                </md-input-container>
            </div>
        </div>
    </div>

</div>

<script type="text/ng-template" id="change-email-template.html">
    <div class="change-email-dialog">
        <div class="icon">@Html.Svg("~/images/site/itemIcons.svg", "info")</div>
        <div class="content">
            <div class="text">
                <span>@AccountResource.CheckYourEmail</span>
                <br />@AccountResource.VerificationCode
            </div>
            <form ng-submit="ic.submitCode()" novalidate name="insertCode">
                <md-input-container>
                    <label>@AccountResource.EnterVerification</label>
                    <input type="number" autocomplete="off" required ng-model="ic.code" />
                </md-input-container>
                <div class="margin-top-10 text-right">
                    <button type="button" ng-click="ic.cancel()" class="btn-default text-capitalize">@GeneralResources.Cancel</button>
                    <button type="submit" class="btn-primary text-capitalize" ng-disabled="!insertCode.$valid">@ItemsResources.Save</button>
                </div>
            </form>
        </div>
    </div>


</script>
