@using Zbang.Cloudents.Mvc4WebRole.Views.Account.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@model Zbang.Cloudents.Mvc4WebRole.Models.Account.Settings.Profile


<form id="profile" name="userProfileForm" class="profileInfo" novalidate ng-submit="saveUserInfo(userProfileForm.$valid)">
    @Html.LabelFor(m => m.FirstName)
    <div class="nameWpr" ng-class="{error : submitted && userProfileForm.FirstName.$error.required }">
        @Html.TextBoxFor(m => m.FirstName, new { @class = "inputText", ng_placeholder = @SharedResources.FirstName, id = "FirstName", ng_model = "formData.firstName", required = "required" })        
        <label class="errorLabel">@ValidationResources.FieldRequired</label>
    </div>
    
    @Html.TextBoxFor(m => m.MiddleName, new { @class = "inputText", ng_placeholder = @SharedResources.MiddleName, id = "MiddleName", ng_model = "formData.middleName" })

    <div class="lastnameWpr" ng-class="{error : submitted && userProfileForm.LastName.$error.required }">        
        <input type="text" id="lastNamee" name="lastName" class="inputText" ng-placeholder="@SharedResources.LastName" ng-model="formData.lastName" required />

        <label class="errorLabel">@ValidationResources.FieldRequired</label>
    </div>
    <div class="section">
        @Html.LabelFor(m => m.Image)
        <img class="profilePhoto" width="100" height="100" ng-if="!params.uploading" ng-src="{{data.image | defaultImage:'user'}}" alt="" />
        <div class="profilePhotoLoader" ng-if="params.uploading" load-spinner="params.uploading" load-spinner-type="init"></div>
        <button type="button" class="photoBtn" pl-upload-standalone url="/Upload/ProfilePicture/" container="main" on-error="onError(error)" on-uploaded="onUploaded(response)" on-files-added="onFilesAdded(files)">@AccountSettingsResources.UploadImage</button>
    </div>
    <div class="schoolSection">
        @Html.LabelFor(m => m.University)
        <div class="schoolWpr">
            <img class="imgBorder" width="32" height="32" alt="School logo" ng-src="{{::data.universityPic|defaultImage:'uni'}}" />
            <div class="propValue">{{::data.university}}</div>
            <a class="changeUni regFont" href="@Url.Action("Choose", "Library")">@AccountSettingsResources.ChangeUni</a>
        </div>
    </div>
    <input type="submit" class="btn1" value="@AccountSettingsResources.Save" ng-click="submitted=true" />
</form>