@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources

<header class="siteHeader">
    @{Html.RenderPartial("_Header");}
</header>
<div class="searchPage page" ng-controller="SearchCtrl">
    <div class="searchContent">
        @{Html.RenderPartial("_BarSearch");}
        <div id="sTabsMenu" class="sTabs" ng-class="params.currentTab">
            <button type="button" ng-click="setCurrentTab('sTab1')">@SharedResources.Courses</button>
            <button type="button" ng-click="setCurrentTab('sTab2')">@SharedResources.Materials</button>
            <button type="button" ng-click="setCurrentTab('sTab3')">@SharedResources.Members</button>
        </div>
        <div class="arrow upArrow"></div>
        <h2 ng-class="{searching: data.loading}" class="semiFont"><span class="sResult">@SharedResources.ResultsFor&nbsp;</span><span class="sResult">@SharedResources.SearchingFor&nbsp;</span><q>{{params.query}}</q></h2>
        <div class="sTabContent" ng-class="{noResults : params.noResults}" infinite-scroll="addToList()" load-spinner="data.loading" infinite-scroll-immediate-check="false">
            <section class="sCourses">
                <ul load-spinner="params.boxesLoading" load-spinner-type="page">
                    <li class="box sCourseItem" ng-repeat="box in data.boxes">
                        <a ng-href="{{::box.url}}" analytics-on="click" analytics-category="Search" analytics-event="Navigate to box">
                            <img class="lFloat boxImg" alt="" width="77" height="98" ng-src="{{::box.image | defaultImage:'box'}}">
                            <div class="sTitle elps" ng-bind-html="::box.name | highlight:params.query:false" dir="{{::params.textDirection}}"></div>
                            <span class="sDetail" ng-class="::{allDetails: box.proffessor && box.courseCode}" ng-bind-html="::box.proffessor | highlight:params.query:false" dir="{{::params.textDirection}}"></span>
                            <span class="sDetail" ng-bind-html="::box.courseCode | highlight:params.query:false" dir="{{::params.textDirection}}"></span>
                        </a>
                    </li>
                </ul>
            </section>
            <section class="sMaterials" load-spinner="params.itemsLoading" load-spinner-type="page">
                <ul>
                    <li class="sMaterialsItem clearfix" ng-repeat="item in data.items" ng-include="'sMaterialItemTemplate'"></li>
                </ul>
                <div class="splitHR" ng-show="data.otherItems.length > 0"><span class="splitHRText">@SharedResources.ResultsOther</span></div>
                <ul>
                    <li class="sMaterialsItem clearfix" ng-repeat="item in data.otherItems" ng-include="'sMaterialItemTemplate'"></li>
                </ul>
                <button class="sOtherMaterialsBtn" ng-click="showOtherUnisItems()" ng-show="params.showOtherUnis">@SharedResources.ResultsOther</button>
            </section>
            <section class="sMembers" load-spinner="params.usersLoading" load-spinner-type="page">
                <ul>
                    <li class="userItem" ng-repeat="user in data.users" user-tooltip-popup="{{::user.id}}">
                        <a ng-href="{{::user.url}}" analytics-on="click" analytics-category="Search" analytics-event="Navigate to user">
                            <img class="userItemImg" ng-src="{{::user.image | defaultImage:'user'}}" width="74" height="74" />
                        </a>
                        <div class="userItemName" ng-bind-html="::user.name | highlight:params.query:false" dir="{{::params.textDirection}}"></div>
                    </li>
                </ul>
            </section>
            <div class="emptySearch">@SharedResources.NoResults</div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="sMaterialItemTemplate">
    <a class="sMaterialLink" ng-href="{{::item.url}}" analytics-on="click" analytics-category="Search" analytics-event="Navigate to item">
        <div class="sOtherUni semiFont" ng-class="::{dot: item.uniName}">{{::item.uniName}}</div>
        <img class="lFloat imgBorder sMaterialImg" alt="" width="110" height="141" ng-src="{{::item.image}}">
        <div class="sTitle elps" ng-bind-html="::item.name | highlight:params.query:false" dir="{{::params.textDirection}}"></div>
        <div class="sSnippet" ng-bind-html="::item.content | highlight:params.query:false" dir="{{::params.textDirection}}"></div>
        <div class="stars">
            <div class="full" ng-style="::{width: itemRating(item.rate)}"></div>
        </div>
        <div data-title="@SharedResources.Views" class="views">{{::item.views || 0}}</div>
    </a>
</script>