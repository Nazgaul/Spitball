@using Zbang.Cloudents.Mvc4WebRole.Views.Library.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources

<div ng-if="!lc.needCode">
    <form novalidate remove-keyboard ng-submit="lc.search()">
        <input spellcheck="false" autofocus ng-disabled="lc.createUniversity" type="search" class="search-text" placeholder="@GeneralResources.Search" ng-model="lc.term" ng-model-options="{debounce : 250}" ng-change="lc.search()" ng-minlength="2" />
    </form>
    
    <div layout="row" layout-align="start center" layout-padding layout-wrap ng-if="!lc.createUniversity" srph-infinite-scroll="lc.paging()">
        <div flex-gt-lg="33" flex-lg="50" flex="100" class="flex" ng-repeat="u in lc.universities track by u.id">
            <div ng-click="lc.selectUniversity(u)" class="univeristy" ga-track-event="['universityChoose', 'selected university']">
                <img class="img-circle" ng-src="{{::u.image}}" width="70" height="70" />
                <div>
                    <span class="ellipsis">{{::u.name}}</span>
                    <ul class="list-inline">
                        <li ng-repeat="img in ::u.userImages track by $index">
                            <img ng-src="{{::img}}" width="30" height="30" />
                        </li>
                        <li ng-if="u.extraPeople">+{{::u.extraPeople}}</li>
                    </ul>

                </div>
            </div>
        </div>
        <div flex-gt-lg="33" flex-lg="50" flex="100" class="flex">
            <div class="add-uni-btn" ng-click="lc.createUniversity = true" ga-track-event="['universityChoose', 'add new university']">
                <span>@Html.Svg("~/images/site/icons.svg", "add")</span>
                <div class="text-capitalize">@LibraryResources.AddSchool</div>
            </div>
        </div>
    </div>

    @{ Html.RenderPartial("_ChooseCreateUniversity");}
</div>
@{ Html.RenderPartial("_ChooseEnterCode");}
