<div class="library-choose" ng-init="lc.countryCode = '@ViewBag.country'">
    <div ng-if="!lc.needCode">
        <input ng-disabled="lc.createUniversity" type="search" class="search-text" placeholder="Search..." ng-model="lc.term" ng-model-options="{debounce : 250}" ng-change="lc.search()" ng-minlength="2" />
        <div class="row" ng-if="!lc.createUniversity">
            <div class="col-xs-12 col-md-6 col-lg-4" ng-repeat="u in lc.universities track by u.id">
                <div ng-click="lc.selectUniversity(u)" class="univeristy">
                    <img class="img-circle" ng-src="{{::u.image}}" width="70" height="70" />
                    <div>
                        <span class="elipsis">{{::u.name}}</span>
                        <ul class="list-inline">
                            <li ng-repeat="img in ::u.userImages track by $index">
                                <img ng-src="{{::img}}" width="30" height="30" />
                            </li>
                            <li ng-if="u.extraPeople">+{{::u.extraPeople}}</li>
                        </ul>

                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-6 col-lg-4">
                <div class="add-uni-btn" ng-click="lc.createUniversity = true">
                    <span>+</span>
                    <div>Add your school</div>
                </div>
            </div>
        </div>

        <div ng-if="lc.createUniversity" class="add-univeristy">
            <form ng-submit="lc.createNewUniversity()" novalidate>
                <md-input-container>
                    <label>Country</label>
                    <md-select ng-model="lc.countryCode">
                        <md-option ng-value="country.iso" ng-repeat="country in ::lc.countries">{{ country.name }}</md-option>
                    </md-select>
                </md-input-container>
                <md-input-container>
                    <label>School name</label>
                    <input type="text" ng-model="lc.universityName" required
                           uib-typeahead="item.name for item in lc.searchAutoComplete($viewValue)"
                           typeahead-wait-ms="250"
                           typeahead-min-length="2"
                           typeahead-on-select="lc.selectUniversity($item)" />
                </md-input-container>
                <button type="submit">create</button>
                <button type="button" ng-click="lc.createUniversity = false">cancel</button>
            </form>
        </div>
    </div>
    <div ng-if="lc.needCode" class="code">
        <h4>שלום {{::lc.code.userName}}</h4>
        <div>
            @Html.Svg("~/images/site/libChooseIcons.svg", "closed_uni", new { @class = "closed-uni-i" })
            <span class="uni-details" ng-bind-html="::lc.code.closedUniText1"></span>
        </div>
        <form novalidate ng-submit="lc.selectUniversity(lc.code.university)">
            @Html.Svg("~/images/site/libChooseIcons.svg", "info", new { @class = "info-i" })
            <div class="arrow-up" ng-bind-html="::lc.code.closedUniText2"></div>
            <md-input-container>
                <label>Enter 9 digit id</label>
                <input type="text" ng-model="lc.code.studentId" required />
            </md-input-container>
            <button type="submit">continue</button>
        </form>
    </div>
</div>
