@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Zbox.Infrastructure.Enums

<div uib-collapse="!l.settingsOpen" class="settings">
    <form ng-submit="l.renameNode(nodeSettings)" novalidate name="nodeSettings" layout="row" layout-wrap>
        <md-input-container flex="100">
            <label class="text-capitalize">@GeneralResources.Rename</label>
            <input type="text" autocomplete="off" name="name" required ng-model="l.settings.name" ng-change="nodeSettings.name.$setValidity('server',true)" />
            <div ng-messages="nodeSettings.name.$error">
                <div ng-message="required">@GeneralResources.RequiredField</div>
                <div ng-message="server">{{l.error}}</div>
            </div>
        </md-input-container>
        <md-input-container flex="100" ng-if="l.nodeDetail.state === 'open' l.state.emptyNodeAdmin && l.nodeDetail.parentUrl == '/library/'">
            <label>Close department</label>
            <md-select name="privacy" ng-model="l.settings.privacy" md-container-class="dd-list" ng-model-options="{trackBy: '$value'}">
                <md-option value="@LibraryNodeSettings.Closed.GetStringValueLowerCase()">@LibraryNodeSettings.Closed.GetEnumDescription()</md-option>
                <md-option value="@LibraryNodeSettings.Open.GetStringValueLowerCase()">@LibraryNodeSettings.Open.GetEnumDescription()</md-option>
            </md-select>
        </md-input-container>
        <div layout="row" layout-align="end center" class="text-capitalize" flex="100">
            <button type="button" class="btn btn-default" ng-click="l.settingsOpen = false" ga-track-event="['university', 'cancel settings']">@GeneralResources.Cancel</button>
            <button type="submit" class="btn button-Blue btn-primary" ng-disabled="l.submitDisabled" ga-track-event="['itemPage', 'save settings']">@GeneralResources.SaveChanges</button>
        </div>
    </form>
</div>
