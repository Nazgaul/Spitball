@using Zbang.Cloudents.Mvc4WebRole.Views.Library.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
<div ng-if="lc.createUniversity" class="add-univeristy" ng-init="lc.countryCode = '@ViewBag.country'">
    <form ng-submit="lc.createNewUniversity(createUniversity)" class="text-capitalize" novalidate name="createUniversity">

        <md-input-container>
            <label>@LibraryResources.Country</label>
            <md-select ng-model="lc.countryCode" md-container-class="dd-list">
                <md-option ng-value="country.iso" ng-repeat="country in ::lc.countries">{{ country.name }}</md-option>
            </md-select>
        </md-input-container>
        <md-input-container>
            <md-autocomplete required md-input-name="name"
                             md-delay="250"
                             md-input-minlength="2"
                             md-no-cache="false"
                             md-selected-item-change="lc.selectUniversity(item)"
                             md-select-on-match="true"
                             md-search-text="lc.universityName"
                             md-items="item in lc.searchAutoComplete(lc.universityName,createUniversity)"
                             md-item-text="item.name"
                             md-floating-label="@LibraryResources.SchoolName">
                <md-item-template>
                    <span md-highlight-text="lc.universityName">{{item.name}}</span>
                </md-item-template>
                <div ng-messages="createUniversity.name.$error" ng-if="createUniversity.name.$touched">
                    <div ng-message="required">@GeneralResources.RequiredField</div>
                    <div ng-message="minlength">@LibraryResources.EntryLength</div>
                    <div ng-message="server">{{lc.error}}</div>
                </div>
            </md-autocomplete>
        </md-input-container>
        <button type="button" class="btn btn-default pull-right" ng-click="lc.createUniversity = false" ga-track-event="['universityChoose', 'cancel new university']">@GeneralResources.Cancel</button>
        <button type="submit" class="btn btn-primary pull-right" ng-disabled="!createUniversity.$valid || lc.submitDisabled" ga-track-event="['universityChoose', 'create new university']">@GeneralResources.Create</button>
    </form>
</div>
