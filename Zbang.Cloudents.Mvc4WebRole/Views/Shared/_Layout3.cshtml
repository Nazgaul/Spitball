@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Store.Resources

@{
    ViewBag.title = ViewBag.title ?? "Cloudents";
    ViewBag.metaDescription = ViewBag.metaDescription ?? "Join the social studying revolution at Cloudents";
    ViewBag.fLib = ViewBag.fLib ?? false;
    ViewBag.fDash = ViewBag.fDash ?? false;
    ViewBag.fBox = ViewBag.fBox ?? false;
    ViewBag.fItem = ViewBag.fItem ?? false;
}
<!DOCTYPE html>
<html data-culture="@System.Threading.Thread.CurrentThread.CurrentUICulture.Name" ng-app="app">
<head>
    <title>@ViewBag.title</title>
    <link rel="SHORTCUT ICON" href="~/favicon.ico" />

    @if (System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName == "en" || System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName == "ru")
    {
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700&subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    }

    <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
    <meta charset="utf-8">
    @*For ipad user scalable fix bug of position fixed - bug 260*@
    @*<meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=no" />*@

    <meta name="title" content="@ViewBag.title" />
    <meta name="description" content="@ViewBag.metaDescription" />
    <link rel="image_src" href="@Url.CdnContent("/Images/cloudents.png")" />

    <meta property="fb:app_id" content="450314258355338">
    @*<base href="/dashboard/" />*@

    @Html.Css2("newcore3")
    @Html.CssRtl("newrtl3")
    @Html.CssCulture("lang")

</head>
<body data-pic="@Url.CdnContent("/Images/EmptyState/user-pic.png")" ng-class="{store: $root.isStore()}">
    <!--[if IE]>
    <script>
        if (!window.document.documentMode || window.document.documentMode < 9) {
            window.location = "/Error/Unsupported";
        }
    </script>
    <![endif]-->
    <noscript>
        <div>
            Cloudents works best with javascript enabled
        </div>
    </noscript>
    <header class="siteHeader">
        <a class="siteLogo lFloat" data-version="@VersionHelper.CurrentVersion()"
           href="@Url.Action("Index", "Dashboard")" target="{{$root.isStore() ? '_self': '' }}"></a>

        <div class="headerRightWpr rFloat">
            <nav class="userSection rFloat">
                <ul class="userNav">
                    @{
                        if (User.Identity.IsAuthenticated)
                        {
                            Html.RenderPartial("TopMenu/_Actions");
                        }
                        Html.RenderAction("GetUserDetail3", "Account", true);
                    }
                </ul>
            </nav>
            <div ng-if="!$root.isStore()">
                @RenderSection("search", false)
            </div>
        </div>
        <h1 ng-class="{showStore : $root.isStore()}"><a href="@Url.RouteUrl("StoreRoot")">@StoreResources.Description</a></h1>
    </header>
    <div class="bodyContent" id="main" ng-class="{noQuiz: !$root.options.quizOpen}" ng-controller="MainCtrl">
        @RenderBody()

        <div id="fb-root"></div>

        <span id="firstTime" data-libf="@ViewBag.fLib.ToString().ToLower()"
              data-myf="@ViewBag.fDash.ToString().ToLower()"
              data-boxf="@ViewBag.fBox.ToString().ToLower()"
              data-itemf="@ViewBag.fItem.ToString().ToLower()"></span>
    </div>

    <div id="mLoading" class="loading" data-loader>
        <div class="spinner"></div>
    </div>
    <div class="ptsPopup" id="ptsPopup" data-pts-before="@SharedResources.SweetPoints" data-pts-after="@SharedResources.Pts">
        <div class="digitWpr"></div>
    </div>


    <div class="uploads" id="uploads">
        @*collapsed*@
        <div class="uploadTop" id="uploads_title">
            <span id="uploadsTT" class="lFloat" data-finish="@DialogResources.UploadedFiles" data-maintitle="@DialogResources.UploadingFiles" data-minimizetile="@DialogResources.Uploading"></span>
            <span id="uploadsTF" class="uploadDetails elps"><q></q></span>
            <span id="uploadsTP" class="uploadPercent"></span>
            <div class="uploadBtns">
                @*<button type="button" class="minimize" id="uploads_minimize"></button>*@
                <button type="button" class="stopUpload" id="uploads_close"></button>
            </div>

        </div>
        <ul class="uploadList" id="uploadList"></ul>
    </div>
    @{
        if (!User.Identity.IsAuthenticated)
        {
            Html.RenderPartial("_Welcome");
        }
    }
    @RenderSection("templates", false)
    @*DO NOT REMOVE THIS AT ALL TIME*@
    <div id="cssCheck"></div>
    @*
        If arrow is on top no class needed otherwise add class bottom,left,right as needed*@
    @{
        if (ViewBag.fBox)
        {
            <div id="quizGuideTemplate" class="steps quizGuideTemplate">
                <div class="tooltip1 left tall" data-step="0" data-tt-position="#addQuiz" data-arrow-position="left">
                    <button type="button" class="closeDialog"></button>
                    <div class="stepTip">
                        <div>@SharedResources.CreateShare</div>
                        <ul>
                            <li>@SharedResources.ExamQuestion</li>
                            <li>@SharedResources.MultipleAnswers</li>
                            <li>@SharedResources.UseMaterial</li>
                            <li>@SharedResources.PublishQuiz</li>
                        </ul>
                        <div>@SharedResources.CloudentsQuizzes</div>
                        <div class="ttBtns">
                            <button type="button" data-done class="rFloat btn3">@SharedResources.Dismiss</button>
                            <button type="button" data-next class="rFloat btn3">@DialogResources.Next</button>
                        </div>
                    </div>
                </div>
                <div class="tooltip1" data-step="1" data-tt-position=".quizItem:not(.draft)" data-arrow-position="top">
                    <button type="button" class="closeDialog"></button>
                    <div class="stepTip">
                        <div>@SharedResources.PrepareExam</div>
                        <ul>
                            <li>@SharedResources.SeeScore</li>
                            <li>@SharedResources.ShareQuiz</li>
                            <li>@SharedResources.DiscussQuiz</li>
                        </ul>
                        <div>@SharedResources.TryIt</div>
                        <div class="ttBtns">
                            <button type="button" data-prev class="lFloat btn3">@SharedResources.Previous</button>
                            <button type="button" data-done class="rFloat btn3">@SharedResources.Dismiss</button>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    <script type="text/javascript" src="~/js/CDNFallback.js"></script>

    <script type="text/ng-template" id="userToolTip.html">
        <div class="userTooltip" ng-class="{hidePoints : user.score <= 0}">
            <a ng-href="{{user.url}}" ng-click="$root.checkReg($event)">
                <img class="ttImg" ng-src="{{user.image}}" width="99" height="99" />
            </a>
            <a class="ttUsername elps" ng-href="{{user.url}}" ng-click="$root.checkReg($event)">{{user.name}}</a>
            <div class="ttSchool elps">{{user.universityName}}</div>
            <span class="ttPoints lFloat" data-tt-points="{{user.score}}">&nbsp;@SharedResources.Points</span>
            <button type="button" class="btn3 rFloat" ng-click="sendUserMessage(user)">@SharedResources.Message</button>
        </div>
    </script>


    <script type="text/html" id="templateUpload">
        <li class="uploadItem" id="{{id}}">
            <span class="fileName elps">{{name}}</span>
            <span class="fileSize">({{size}})</span>
            <div class="uploadProgress">
                <button type="button" class="fileCancel rFloat">@DialogResources.Cancel</button>
                <button type="button" class="fileDone rFloat" disabled="disabled"></button>
                <button type="button" class="fileError rFloat" disabled="disabled"></button>
                <span class="progress rFloat" data-percentage="0"><span class="progressFill"></span></span>
            </div>
        </li>
    </script>

    @*@Search*@
    <script type="text/ng-template" id="boxHeaderSearch">
        <a bo-href="box.url" class="searchItem">
            <img class="lFloat imgBorder" width="40" height="50" bo-src="box.image" alt="">
            <div class="searchDetails">
                <div class="searchTitle semiFont elps" bo-html="box.name | highlight:formData.query:false" dir="{{params.textDirection}}"></div>
                <span class="searchDetail" bo-style="{allDetails: box.proffessor && box.courseCode}" bo-html="box.proffessor | highlight:formData.query:false" dir="{{params.textDirection}}"></span>
                <span class="searchDetail" bo-html="box.courseCode | highlight:formData.query:false" dir="{{params.textDirection}}"></span>
            </div>
        </a>
    </script>
    <script type="text/ng-template" id="itemHeaderSearch">
        <a bo-href="item.url" class="searchItem">
            <div class="otherUni semiFont" ng-if="item.universityName" bo-text="item.universityName"></div>
            <img class="lFloat imgBorder" width="40" height="50" bo-src="item.image" alt="">
            <div class="searchDetails">
                <div class="searchTitle semiFont elps" bo-html="item.name | highlight:formData.query:false" dir="{{params.textDirection}}"></div>
                <div class="boxLoc searchDetail" data-search-in="@SharedResources.In" bo-text="item.boxname"></div>
            </div>
        </a>
    </script>
    <script type="text/ng-template" id="personHeaderSearch">
        <a bo-href="person.url" class="searchItem">
            <img class="lFloat imgBorder userImg" bo-src="person.image" alt="" width="33" height="33" />
            <div class="searchTitle semiFont elps" bo-html="person.name | highlight:formData.query:false" dir="{{params.textDirection}}"></div>
        </a>
    </script>

    <script type="text/html" id="userToolTipTempalte">
        <a data-navigation="User" href="{{url}}">
            <img class="ttImg" src="{{image}}" width="99" height="99" />
        </a>
        <a class="ttUsername elps" data-navigation="User" href="{{url}}">{{name}}</a>
        <div class="ttSchool elps">{{university}}</div>
        <span class="ttPoints lFloat" data-tt-points="{{score}}">&nbsp;Points</span>
        <button type="button" class="btn3 rFloat">Message</button>
    </script>
    @*@Search*@
    <script type="text/javascript" src="@Url.Action("JsResources", "Home")"></script>

    @RenderSection("scripts", false)





    @if (User.Identity.IsAuthenticated)
    {
        <iframe id="fconnect" data-src="@System.Configuration.ConfigurationManager.AppSettings["pushUrl"]"></iframe>
    }
</body>
</html>
