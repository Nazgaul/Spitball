@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Account.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.User.Resources

<a id="invite"></a>
<div class="portlet invite invite-dialog" ng-cloak ng-controller="inviteController as i">
    <div class="portlet-title">
        <div class="caption text-capitalize">
            @IndexResources.Invite {{i.title}}
        </div>
    </div>
    <div class="content borderTC19">
        <div class="tabs" layout="row">
            <button class="spitball backgroundTC21" ng-class="{active: i.tab === i.state.spitball}" ng-click="i.switchTab(i.state.spitball)" flex="33" layout="row" layout-align="center center">
                <span ng-if="i.tab === i.state.spitball">@Html.Svg("~/images/site/icons.svg", "smallLogo")</span>
                <span ng-if="i.tab !== i.state.spitball">@Html.Svg("~/images/site/icons.svg", "smallLogo", new { @class = "svgTC22" })</span>
            </button>
            <button class="email backgroundTC21" ng-class="{active: i.tab === i.state.email}" ng-click="i.switchTab(i.state.email)" flex="33" layout="row" layout-align="center center">
                <span ng-if="i.tab === i.state.email">@Html.Svg("~/images/site/icons.svg", "gmail")</span>
                <span ng-if="i.tab !== i.state.email">@Html.Svg("~/images/site/icons.svg", "gmailgrey", new { @class = "svgTC22" })</span>
            </button>
            <button class="facebook backgroundTC21" ng-class="{active: i.tab === i.state.facebook}" ng-click="i.switchTab(i.state.facebook)" flex="33" layout="row" layout-align="center center">
                <span ng-if="i.tab === i.state.facebook">@Html.Svg("~/images/site/social-icons.svg", "facebook-colored")</span>
                <span ng-if="i.tab !== i.state.facebook">@Html.Svg("~/images/site/social-icons.svg", "fbgrey", new {@class = "svgTC22"})</span>
            </button>
        </div>
        <div class="center">
            <div ng-if="i.allContacts.length">
                <div class="search-user">
                    <md-input-container class="md-block">
                        <label ng-if="i.tab === i.state.email">@IndexResources.AddMail</label>
                        <label ng-if="i.tab === i.state.spitball">@IndexResources.AddSpitball</label>
                        <input ng-model="i.filterQuery" ng-change="i.querySearch(i.filterQuery)">
                    </md-input-container>
                </div>
                <md-list ng-if="i.tab === i.state.email || i.tab === i.state.spitball" flex="100" layout-wrap layout="row" layout-align="start start" ng-slimscroll watch-content="true" height="290px" width="100%" color="#BBB">

                    <md-list-item class="contact-item" flex-xs="100" flex-sm="50" flex="33" ng-repeat="contact in i.allContacts">
                        <div class="item-wrapper" layout="row" layout-align="space-between center" flex="100">
                            <div class="user" layout="row" layout-align="start center" ng-class="{selected: contact.isSelected}" ng-click="i.toggleContact(contact)">
                                <div class="flip-container">
                                    <div class="flipper">
                                        <div class="avatar"><user-image class="md-avatar" name="contact.name" image="contact.image" width="40" height="40"></user-image></div>
                                        <div class="checkbox"></div>
                                    </div>
                                </div>
                                <div class="md-list-item-text compact">{{contact.name}}</div>
                            </div>
                        </div>
                    </md-list-item>

                </md-list>
            </div>
            <div class="email" ng-if="!(i.allContacts.length) && i.tab === i.state.email">
                <div><span class="text">@IndexResources.GmailContact</span></div>
                <button class="btn button-Blue btn-primary gmail" ng-click="i.importGoogleContract()" type="button" ga-track-event="['invite', 'import gmail']">
                    <span>
                        @LogOnResources.ExternalProvider
                    </span>
                </button>
            </div>
            <div class="facebook" ng-if="i.tab === i.state.facebook">
                <div><span class="text">@IndexResources.FacebookContact</span></div>
                <button class="btn button-Blue btn-primary gmail" ng-click="i.fbShare()" type="button" ga-track-event="['invite', 'import gmail']">
                    <span>
                        @UserResources.Share
                    </span>
                </button>
            </div>
        </div>
        <div class="bottom">
            <button type="button" class="close btn btn-default send" ng-click="i.closeInvite()" ga-track-event="['invite', 'cancel']">@GeneralResources.Cancel</button>
            <button type="button" class="btn button-Blue btn-primary send" ga-track-event="['invite', 'send']"  ng-if="i.allContacts.length" ng-click="i.sendInvite()" ng-disabled="i.submitDisabled">@IndexResources.Send</button>
        </div>
    </div>
</div>

