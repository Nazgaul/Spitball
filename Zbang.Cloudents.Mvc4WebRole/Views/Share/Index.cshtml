@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Share.Resources

@model Zbang.Zbox.ViewModel.Dto.BoxDtos.BoxMetaDto

@{
    var img = Model.Image ?? "/images/emptyState/my_default3.png";
}

<div id="invite" class="page" ng-controller="InviteCtrl">

    <div class="inviteWpr">
        <aside class="invSidebar rFloat">
            <form id="inviteSendEmailForm" class="invForm">
                <h3>@InviteResources.InviteByEmail</h3>

                <div class="inputText emailUser">
                    <div class="inviteEmailListWpr">
                        <ul id="inviteEmailList" class="emailList"></ul>
                        <input id="inviteInput" class="inviteInput" type="text" placeholder="@InviteResources.AddEmails" />
                    </div>
                </div>
                <div class="invSent">
                    <h4>@InviteResources.Success!</h4>
                    <div>@InviteResources.MailSent</div>
                </div>
                <button id="inviteSendEmail" type="submit" class="rFloat btn1">@DialogResources.Send</button>
            </form>

            <h2 id="inviteConnectMore">@InviteResources.ConnectMore</h2>
            <button type="button" class="connectMore fb"></button>
            <button type="button" class="connectMore gmail"></button>
        </aside>
        <div class="invMain elps">
            <div class="inviteSources rFloat">
                <button type="button" class="invTab cloudents" ng-class="{current: params.currentState === 0}" ng-click="selectState(0)"></button>
                <button type="button" class="invTab fb" ng-class="{current: params.currentState === 1}" ng-click="selectState(1)"></button>
                @*<button type="button" class="invTab gPlus"></button>*@
                <button type="button" class="invTab gmail" ng-class="{current: params.currentState === 2}" ng-click="selectState(2)"></button>
            </div>

            <a href="@Model.Url" class="invHeaderText">
                {{params.inviteText}}<span>@Model.Name</span>
                <img id="inviteBoxImage" src="@img" alt="" width="26" height="34" class="invboxImg" />

            </a>

            <div class="invContentWpr" ng-class="[params.className, {notConnected : params.isConnected}]">
                <div class="invContentTop">
                    <h4>{{params.text}}</h4>
                    <input type="search" class="inputText" placeholder="@InviteResources.SearchByName" ng-model="params.contactSearch" ng-keyup="filterContacts()" />
                </div>

                <div class="invContent">
                    <ul class="invList clearfix" bindonce>
                        <li class="invItem lFloat" ng-repaet="contact in params.contacts">
                            <a bo-href="contact.url">
                                <img alt="" class="friendImg" bo-src="contact.image" width="34" height="34">
                            </a>
                            <span class="invName elps" bo-text="user.name"></span>
                            <button type="button" class="invBtn rFloat" ng-click="inviteContact(contact)">
                                @SharedResources.Invite
                            </button>

                        </li>

                    </ul>
                </div>

                <div id="connectAccount" class="connectAccount">
                    <span class="connectFrom fromCloudents"></span>
                    <span class="connector"></span>
                    <span class="connectTo"></span>
                    <div class="connectTxt" data-inv-fbaccount="@InviteResources.FbAccount" data-inv-gmailaccount="@InviteResources.GmailAccount">{{params.connecText}} @InviteResources.FindFriends&nbsp;</div>
                    <button id="inviteConnectAccount" type="button" class="btn3" ng-click="socialConnect()">@SharedResources.Connect</button>
                </div>
                <div class="invNoResults">
                    <h2>@InviteResources.NoResults</h2>
                    <div>@InviteResources.CheckFor</div>
                </div>
            </div>
        </div>
    </div>
    <div fb-block ng-if="params.facebookInvite"></div>
</div>