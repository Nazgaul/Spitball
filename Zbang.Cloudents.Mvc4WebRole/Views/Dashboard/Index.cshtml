@using Zbang.Cloudents.Mvc4WebRole.Views.Dashboard.Resources
@using Zbang.Cloudents.Mvc4WebRole.Views.Shared.Resources

<div uib-collapse="!d.inviteOpen" compile-html="d.html" expanding="d.inviteExpand()"></div>
<div class="ad" data-ng-dfp-ad-container>
    <div data-ng-dfp-ad="div-gpt-ad-1461243129238-0" data-ng-dfp-ad-hide-when-empty></div>
</div>
<div class="page-title">
    <h1>@DashboardResource.Title</h1>
</div>

<div class="dashboard-actions" layout="row" layout-padding layout-wrap>
    <div class="container flex" flex-lg="33" flex-gt-lg="25" flex-md="50" flex-sm="50" flex="100">
        <button ng-if="d.boxes.length > 2" type="button" ng-click="d.inviteToSpitabll()" class="inviteBtn backgroundTC29 borderTC32" ga-track-event="['dashboard', 'invite open']">
            <div class="wrapper">
                @Html.Svg("~/images/site/icons.svg", "invite", new { @class = "svgTC31"})
                <span class="textTC30">@DashboardResource.InviteToSpitball</span>
            </div>
        </button>
        <button type="button" ng-click="d.createBoxOn = true" class="create-btn backgroundTC29 borderTC32" ga-track-event="['dashboard', 'createbox']">
            <div class="wrapper">
                @Html.Svg("~/images/site/icons.svg", "add", new { @class = "svgTC31" })
                <span class="textTC30">@DashboardResource.StudyGroupHeader</span>
            </div>
        </button>
    </div>
</div>
<div layout="row" layout-padding layout-wrap>
    <div flex-lg="33" flex-gt-lg="25" flex-md="50" flex-xs="100" flex-sm="50" class="create-box flex" ng-class="{'create-box-show' : d.createBoxOn}">
        @{ Html.RenderPartial("_Create");}
    </div>
    <div flex-lg="33" flex-gt-lg="25" flex-md="50" flex-sm="50" flex="100" class="flex">
        @{ Html.RenderPartial("_University");}
    </div>
    <div ng-if="d.showLeaderboard" flex-lg="33" flex-gt-lg="25" flex-md="50" flex-sm="50" class="flex" flex="100">
        @* ReSharper disable once Mvc.PartialViewNotResolved *@
        @{ Html.RenderPartial("_Leaderboard", DashboardResource.LeaderboardTitle);}
    </div>
    <div flex-lg="33" flex-gt-lg="25" flex-md="50" flex-xs="100" flex-sm="50" ng-repeat="e in d.boxes track by e.id" class="flex">
        <div class="box-cube color-override borderColor6">
            <div ng-include="'box-template.html'"></div>
            <div class="updates color-override textColor8" ng-if="e.updates !== 0">{{e.updates}}</div>
            <md-menu>
                <button type="button" class="md-icon-button delete" ng-click="app.openMenu($mdOpenMenu, $event)" ga-track-event="['dashboard', 'deleteBoxMenu']">
                    @Html.Svg("~/images/site/icons.svg", "ThreeDots", new { @class = "dots-3 color-override svgColor6" })
                </button>
                <md-menu-content width="1">
                    <md-menu-item>
                        <button type="button" class="md-button" aria-label="remove box" ng-click="d.deleteBox($event,e)" ga-track-event="['dashboard', 'deleteBox']">
                            @GeneralResources.Delete
                        </button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </div>
    </div>
    <div flex-lg="33" flex-gt-lg="25" flex-md="50" flex-xs="100" flex-sm="50" ng-repeat="e in ::d.suggested" class="flex">
        <div class="box-cube color-override borderColor6">
            <div ng-include="'box-template.html'"></div>
        </div>
    </div>
</div>