// MutationObserver-Shim v0.2.1 (http://github.com/megawac/MutationObserver.js)
// Authors: Graeme Yeates (yeatesgraeme@gmail.com) 
window.MutationObserver=function(z,s){var e=z.MutationObserver||z.WebKitMutationObserver;if(!e){var D=Array.prototype.indexOf,E=Array.prototype.map,F=Array.prototype.reduce,t=function(b){var a={type:null,target:null,addedNodes:[],removedNodes:[],attributeName:null,attributeNamespace:null,oldValue:null},c;for(c in b)a[c]!==s&&(a[c]=b[c]);return a},A=function(b,a){function c(b,p){var m=3===b.nodeType,q={j:b};a.a&&!m&&(p||a.d)&&(q.a=F.call(b.attributes,function(b,c){if(!a.e||a.e[c.name])b[c.name]=c.value;
return b},{}));a.b&&m&&(q.b=b.nodeValue);if((a.c||a.b)&&(p||a.d)||a.a&&a.d)q.c=E.call(b.childNodes,function(a){return c(a,!1)});return q}return c(b,!0)},y=function(b,a,c,d){for(var p={},m=a.attributes,q,n,r=m.length;r--;)q=m[r],n=q.name,d&&d[n]===s||(q.value!==c[n]&&b.push(t({type:"attributes",target:a,attributeName:n,oldValue:c[n],attributeNamespace:q.namespaceURI})),p[n]=!0);for(n in c)p[n]||b.push(t({target:a,type:"attributes",attributeName:n,oldValue:c[n]}))},B=1,C=function(b){try{return b.id||
(b.mo_id=b.mo_id||B++)}catch(a){try{return b.nodeValue}catch(c){return B++}}},H=function(b,a,c,d){function p(a,c){for(var r=a.childNodes,e=c.c,G=r.length,x=e.length,g,h,f,l,k,u,v=0,w=0;v<G||w<x;)if(k=r[v],u=(f=e[w])&&f.j,k===u)d.a&&f.a&&y(b,k,f.a,d.e),d.b&&3===k.nodeType&&k.nodeValue!==f.b&&b.push(t({type:"characterData",target:k,oldValue:f.b})),h&&m(h,a,r,e),d.d&&(k.firstChild||f.c.length)&&p(k,f),v++,w++;else{g||(g={},h=[]);if(k){l=f=C(k);if(g[l]===s){a:{for(l=w;l<e.length;l++)if(e[l].j===k)break a;
l=-1}-1===l?d.c&&b.push(t({type:"childList",target:a,addedNodes:[k]})):(g[f]=!0,h.push({h:v,i:l}))}v++}if(u){k=f=C(u);if(g[k]===s)if(-1===(l=D.call(r,u,v)))d.c&&b.push(t({type:"childList",target:c.j,removedNodes:[u]}));else if(0===l)continue;else g[f]=!0,h.push({h:l,i:w});w++}}h&&m(h,a,r,e)}function m(a,c,e,m){for(var s=a.length-1,x=-~(s/2),g,h,f;f=a.pop();)g=e[f.h],h=m[f.i],d.c&&x&&Math.abs(f.h-f.i)>=s&&(b.push(t({type:"childList",target:c,addedNodes:[g],removedNodes:[g]})),x--),d.a&&h.a&&y(b,g,
h.a,d.e),d.b&&3===g.nodeType&&g.nodeValue!==h.b&&b.push(t({type:"characterData",target:g,oldValue:h.b})),d.d&&p(g,h)}p(a,c)},I=function(b,a){var c=A(b,a);return function(d){var e=d.length;a.a&&c.a&&y(d,b,c.a,a.e);(a.c||a.d)&&H(d,b,c,a);d.length!==e&&(c=A(b,a))}},e=function(b){var a=this;a.g=[];a.k=function(){var c=a.takeRecords();c.length&&b.call(a,c,a);a.f=setTimeout(a.k,e._period)}};e._period=30;e.prototype.observe=function(b,a){for(var c=this.g,d=0;d<c.length;d++)if(c[d].m===b){c.splice(d,1);break}d=
{a:!!(a.attributes||a.attributeFilter||a.attributeOldValue),c:!!a.childList,d:!!a.subtree,b:!(!a.characterData&&!a.characterDataOldValue)};a.attributeFilter&&(d.e=a.attributeFilter.reduce(function(a,b){a[b]=!0;return a},{}));c.push({m:b,l:I(b,d)});this.f||this.k()};e.prototype.takeRecords=function(){for(var b=[],a=this.g,c=0;c<a.length;c++)a[c].l(b);return b};e.prototype.disconnect=function(){this.g.length=0;clearTimeout(this.f);this.f=null}}return e}(window);
