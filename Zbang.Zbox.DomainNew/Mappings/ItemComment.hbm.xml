<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Zbang.Zbox.Domain"
                   namespace="Zbang.Zbox.Domain">
  <class name="ItemComment" table="ItemComment">
    <id name="Id" column="ItemCommentId">
      <generator class="assigned"></generator>
    </id>
    
    <many-to-one name="Item" class="Item" column="ItemId" not-null="true" foreign-key="itemIdItemComment"/>
    <property name="ImageId" not-null="true"></property>
    <property name="CordX" not-null="true"></property>
    <property name="CordY" not-null="true"></property>
    <property name="Width" not-null="true"></property>
    <property name="Height" not-null="true"></property>
    <property name="Comment" not-null="true" length="8000"></property>
    <component name="UserTime" class="UserTimeDetails">
      <property name="CreationTime" not-null="true" insert="true" update="false" />
      <property name="UpdateTime"  not-null="true" insert="true"  />
      <property name="CreatedUser"  not-null="true" insert="true" update="false"/>
      <property name="UpdatedUser"  not-null="true" insert="true" />
    </component>
    <many-to-one name="Author" class="User" column="UserId" not-null="true" foreign-key="userIdItemComment"/>
  </class>
  <class name="ItemCommentReply" table="ItemCommentReply">
    <id name="Id" column="ItemReplyId">
      <generator class="assigned"></generator>
    </id>
    <many-to-one name="Item" class="Item" column="ItemId" not-null="true" foreign-key="itemIdItemReply"/>
    <many-to-one name="Author" class="User" column="UserId" not-null="true" foreign-key="userIdItemReply"/>
    <many-to-one name="Parent" class="ItemComment" column="ParentId" not-null="true" foreign-key="parentIdItemReply"/>
    <component name="UserTime" class="UserTimeDetails">
      <property name="CreationTime" not-null="true" insert="true" update="false" />
      <property name="UpdateTime"  not-null="true" insert="true"  />
      <property name="CreatedUser"  not-null="true" insert="true" update="false"/>
      <property name="UpdatedUser"  not-null="true" insert="true" />
    </component>
    <property name="Comment" not-null="true" length="8000"></property>
    <property name="ImageId" not-null="true"></property>
  </class>

</hibernate-mapping>
