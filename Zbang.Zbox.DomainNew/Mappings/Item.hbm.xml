<?xml version="1.0" encoding="utf-8" ?>

<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Zbang.Zbox.Domain"
                   namespace="Zbang.Zbox.Domain">
  <class name="Item" table="Item" >
    <id name="Id" type="long" column="ItemId">
      <generator class="native"/>
    </id>
    <discriminator column="Discriminator" not-null="true" type="System.String" />
    <property name="Name" length="4000"/>
    <property name="IsDeleted" index="iBoxIsDeleted"/>
    <many-to-one name="Uploader" class="User" column="UserId" not-null="true"/>
    <property name="Size"/>
    <!--<property name="Uid" access="readonly"/>-->
    <property name="NumberOfViews"/>
    <component name="DateTimeUser" class="UserTimeDetails">
      <property name="CreationTime" not-null="true" insert="true" update="false" />
      <property name="UpdateTime"  not-null="true" insert="true"  />
      <property name="CreatedUser"  not-null="true" insert="true" update="false"/>
      <property name="UpdatedUser"  not-null="true" insert="true" />
    </component>
    <many-to-one column="BoxId" class="Box" name="Box" index="iBoxIsDeleted"/>


    <many-to-one column="QuestionId" class="Question" name="Question" />
    <many-to-one column="AnswerId" class="Answer" name="Answer"/>

    <property name="ItemContentUrl" column="BlobName"/>

    <property name="Rate" >
      <column name="Rate" sql-type="float"/>
    </property>
    <subclass name="Link" discriminator-value="Link">
    </subclass>
    <subclass name="File" discriminator-value="File">
      <property name="ThumbnailBlobName"/>
      <property name="ContentUpdateTime" not-null="false"/>
      <property name="NumberOfDownloads"/>
    </subclass>
  </class>
</hibernate-mapping>