//using System;
//using System.IO;
//using System.Threading;
//using System.Threading.Tasks;
//using Google.Apis.Auth.OAuth2;
//using Google.Apis.Services;
//using Google.Apis.Upload;
//using Google.Apis.Util.Store;
//using Google.Apis.YouTube.v3;
//using Google.Apis.YouTube.v3.Data;

//namespace ConsoleApp
//{
//    public class UploadVideo
//    {
       

//        public void Upload()
//        {
//            try
//            {
//                Run().Wait();
//            }
//            catch (AggregateException ex)
//            {
//                foreach (var e in ex.InnerExceptions)
//                {
//                    Console.WriteLine("Error: " + e.Message);
//                }
//            }
//        }


//        static string _applicationName = "Quickstart";

//        private async Task Run()
//        {
//            UserCredential credential;

//            using (var stream =
//                new FileStream("client_secret.json", FileMode.Open, FileAccess.Read))
//            {

//                credential = await GoogleWebAuthorizationBroker.AuthorizeAsync(
//                    GoogleClientSecrets.Load(stream).Secrets,
//                    // This OAuth 2.0 access scope allows for full read/write access to the
//                    // authenticated user's account.
//                    new[] { YouTubeService.Scope.Youtube, YouTubeService.Scope.YoutubeUpload, YouTubeService.Scope.YoutubeForceSsl },
//                    "user",
//                    CancellationToken.None,
//                    new FileDataStore(this.GetType().ToString())
//                );
//            }

//            var youtubeService = new YouTubeService(new BaseClientService.Initializer()
//            {
//                HttpClientInitializer = credential,
//                ApplicationName = _applicationName,
//            });



//            var video = new Video();
//            video.Snippet = new VideoSnippet();
//            video.Snippet.ChannelId = "UCM-h2YfdhUKqOx6IXgxIzFg";
//            video.Snippet.Title = "Default Video Title 111 hopo G";
//            video.Snippet.Description = "Default Video Description 111 hopo G";
//            //video.Snippet.Tags = new string[] { "tag1", "tag2" };
//            video.Snippet.CategoryId = "22"; // See https://developers.google.com/youtube/v3/docs/videoCategories/list
//            video.Status = new VideoStatus();
//            video.Status.PrivacyStatus = "public"; // or "private" or "public"
//            var filePath = @"C:\Users\hadar\Downloads\small.mp4"; // Replace with path to actual movie file.

//            using (var fileStream = new FileStream(filePath, FileMode.Open))
//            {
//                var videosInsertRequest = youtubeService.Videos.Insert(video, "snippet,status", fileStream, "video/*");
//                videosInsertRequest.ProgressChanged += videosInsertRequest_ProgressChanged;
//                videosInsertRequest.ResponseReceived += videosInsertRequest_ResponseReceived;

//                await videosInsertRequest.UploadAsync();
//            }
//        }

//        void videosInsertRequest_ProgressChanged(IUploadProgress progress)
//        {
//            switch (progress.Status)
//            {
//                case UploadStatus.Uploading:
//                    Console.WriteLine("{0} bytes sent.", progress.BytesSent);
//                    break;

//                case UploadStatus.Failed:
//                    Console.WriteLine("An error prevented the upload from completing.\n{0}", progress.Exception);
//                    break;
//            }
//        }

//        void videosInsertRequest_ResponseReceived(Video video)
//        {
//            Console.WriteLine("Video id '{0}' was successfully uploaded.", video.Id);
//        }
//    }

//}